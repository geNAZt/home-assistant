- id: inside_temp_at_00_06_snapshot
  alias: "Snapshot inside_temp_mean_now at 00:00 and 06:00"
  mode: single
  trigger:
    - platform: time
      at: "00:00:00"
      id: t00
    - platform: time
      at: "06:00:00"
      id: t06
  action:
    - choose:
        - conditions: >
            {{ trigger.id == 't00'
               and states('sensor.inside_temp_mean_now') not in ['unknown','unavailable','none'] }}
          sequence:
            - service: input_number.set_value
              target: {entity_id: input_number.inside_temp_at_00}
              data: {value: "{{ states('sensor.inside_temp_mean_now')|float(0) }}"}
            - service: input_datetime.set_datetime
              target: {entity_id: input_datetime.inside_temp_at_00_ts}
              data: {datetime: "{{ now().strftime('%Y-%m-%d %H:%M:%S') }}"}
        - conditions: >
            {{ trigger.id == 't06'
               and states('sensor.inside_temp_mean_now') not in ['unknown','unavailable','none'] }}
          sequence:
            - service: input_number.set_value
              target: {entity_id: input_number.inside_temp_at_06}
              data: {value: "{{ states('sensor.inside_temp_mean_now')|float(0) }}"}
            - service: input_datetime.set_datetime
              target: {entity_id: input_datetime.inside_temp_at_06_ts}
              data: {datetime: "{{ now().strftime('%Y-%m-%d %H:%M:%S') }}"}