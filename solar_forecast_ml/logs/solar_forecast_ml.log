2026-02-02 12:02:56 - custom_components.solar_forecast_ml - INFO - File logging enabled (non-blocking): /config/solar_forecast_ml/logs/solar_forecast_ml.log
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.core.core_dependency_handler - INFO - Checking dependencies...
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.core.core_dependency_handler - DEBUG - [OK] numpy is functional (Version: 2.3.2)
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.core.core_dependency_handler - DEBUG - [OK] aiofiles is functional
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.core.core_dependency_handler - INFO - [OK] All dependencies are present
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.services.service_notification - DEBUG - NotificationService instance created
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.services.service_notification - INFO - [OK] NotificationService successfully initialized
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.services.service_notification - INFO - [OK] NotificationService created successfully
2026-02-02 12:02:56 - custom_components.solar_forecast_ml - DEBUG - NotificationService created and stored in hass.data
2026-02-02 12:02:56 - custom_components.solar_forecast_ml - DEBUG - V13.1 Migration: No 'Default' panel group found - data already clean
2026-02-02 12:02:56 - custom_components.solar_forecast_ml - DEBUG - Already installed (flag exists in .storage)
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - ============================================================
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - STARTUP INITIALIZER - Creating critical pre-async files
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - ============================================================
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_startup_initializer - DEBUG - Created/verified 8 directories
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - Directory structure ready
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - open_meteo_cache.json ready
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - astronomy_cache.json ready
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - weather_forecast_corrected.json ready
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - daily_forecasts.json ready
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - ============================================================
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - STARTUP INITIALIZER complete - 4 critical files ready
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - ============================================================
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.core.core_coordinator_init_helpers - INFO - Panel groups configured: 1 groups, total 12.87 kWp
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.core.core_coordinator_init_helpers - INFO - Inverter clipping enabled: max 10.00 kW (forecasts capped, clipped hours excluded from training)
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_manager - INFO - DataManager Facade initialized with specialized handlers
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.sensors.sensor_data_collector - DEBUG - SensorDataCollector initialized with centralized sensor mapping.
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.production.production_history - INFO - ProductionCalculator initialized (Recorder-free mode)
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.production.production_tracker - INFO - ProductionTimeCalculator (Live Tracking) initialized with LOCAL time and persistence
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - ForecastOrchestrator initialized with 1 panel groups.
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.production.production_adaptive_forecast - DEBUG - AdaptiveForecastEngine initialized
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.production.production_scheduled_tasks - DEBUG - ScheduledTasksManager initialized
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.services.service_error_handler - INFO - ErrorHandlingService initialized.
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.coordinator - DEBUG - SolarForecastMLCoordinator initialized
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_manager - INFO - DataManager: Running schema validation (creates missing files)...
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO - === JSON Schema Validation Starting ===
2026-02-02 12:02:56 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO - SCHEMA: learned_weights.json missing (AI will train when ready)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_schema_validator - DEBUG - Self-heal astronomy_cache.json: added missing 'pv_system.max_peak_conditions.sun_elevation_deg'
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_schema_validator - DEBUG - Self-heal astronomy_cache.json: added missing 'pv_system.max_peak_conditions.cloud_cover_percent'
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_schema_validator - DEBUG - Self-heal astronomy_cache.json: added missing 'pv_system.max_peak_conditions.temperature_c'
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_schema_validator - DEBUG - Self-heal astronomy_cache.json: added missing 'pv_system.max_peak_conditions.solar_radiation_wm2'
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO - SCHEMA: Self-healed astronomy_cache.json (added missing fields)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO - === Schema Validation Summary ===
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO -   learned_weights.json missing (AI will train when ready)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO -   Self-healed astronomy_cache.json (added missing fields)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO - Self-healed 1 file(s): astronomy_cache.json
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO - === JSON Schema Validation Complete ===
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_manager - INFO - JSON schema validation completed successfully ✓
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_manager - INFO - DataManager: All 7 required files present ✓
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_manager - INFO - DataManager initialized successfully
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_manager - DEBUG - DataManager async initialization complete (template-based, no action needed)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.coordinator - INFO - ShareBackupManager initialized - learning data protection enabled
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.coordinator - DEBUG - Daily backup sync scheduled for 4:00 AM
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.ai.ai_predictor - INFO - AIPredictor initialized: 1 groups, 12.87 kWp total
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.ai.ai_dni_tracker - INFO - DniTracker initialized
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.ai.ai_seasonal - INFO - SeasonalAdjuster initialized
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.ai.ai_dni_tracker - INFO - DNI tracker loaded
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.ai.ai_seasonal - INFO - Seasonal factors loaded
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.ai.ai_feature_engineering - INFO - FeatureEngineer initialized: 20 features (normalized)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.ai.ai_tiny_lstm - INFO - TinyLSTM initialized: input=20, hidden=32, seq=24, outputs=1, attention=True
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.ai.ai_tiny_ridge - INFO - TinyRidge initialized: input=20, seq=24, flat_size=480, outputs=1
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.ai.ai_predictor - INFO - Models initialized: 20 features, 1 outputs, 1 groups, attention=True
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.ai.ai_predictor - INFO - No weights found - model untrained (1 outputs)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.physics.physics_calibrator - INFO - PhysicsCalibrator initialized
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.physics.physics_calibrator - DEBUG - Loaded calibration config: 0 groups, 0 bucket factors
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.physics.physics_calibrator - DEBUG - Frost migration already completed (version >= 3.0)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.physics.physics_calibrator - INFO - PhysicsCalibrator: No existing calibration data found
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.coordinator - INFO - PhysicsCalibrator initialized for self-learning corrections
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.astronomy.astronomy_cache - INFO - AstronomyCache: Panel groups configured (1 groups)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.coordinator - INFO - AstronomyCache: Panel groups set (1 groups)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.astronomy.astronomy_cache - INFO - Astronomy Cache initialized: lat=52.36948782131487, lon=9.750484228134157, tz=Europe/Berlin, elev=0m
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Data Pipeline Manager initialized - 5-Source Expert Blending (V12.3)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.astronomy.astronomy_cache_manager - DEBUG - Astronomy cache loaded into memory: 7 days
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Setting up Weather Data Pipeline Manager (5-Source Expert Blending)...
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - OpenMeteoClient initialized (lat=52.3695, lon=9.7505) with persistent cache
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.forecast.forecast_weather - INFO - WeatherService initialized - Open-Meteo (lat=52.3695, lon=9.7505)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Service initialized (lat=52.3695, lon=9.7505)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_precision - INFO - WeatherPrecisionTracker initialized with sensors: []
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - INFO - PirateWeatherExpert disabled - no API key configured. Get free key at https://pirate-weather.apiable.io/
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - INFO - WeatherExpertBlender initialized with 5 experts (4 active): open_meteo, wttr_in, ecmwf_layers, bright_sky
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - INFO - Loaded expert weights from weather_expert_weights.json (last updated: None)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - DEBUG - wttr.in: Restored memory cache from file (age: 0.1h, valid for 5.9h more)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - DEBUG - WttrInExpert: Loaded 3 days from file cache
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - DEBUG - Bright Sky: Restored memory cache from file (age: 0.1h, valid for 2.9h more, 48 visibility entries)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - DEBUG - Bright Sky: Loaded 4 days from file cache
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - INFO - WeatherExpertLearner initialized (solar_radiation_sensor=not configured - using production fallback)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_visibility_learner - INFO - VisibilityLearner initialized (solar_radiation_sensor=not configured - using static weights)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_visibility_learner - DEBUG - VisibilityLearner: No saved weights, using defaults
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - DEBUG - VisibilityLearner connected to WeatherExpertBlender
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - DEBUG - VisibilityLearner connected to WeatherExpertLearner
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - VisibilityLearner initialized (active=False)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Expert Blender initialized with 4 active experts (Open-Meteo, wttr.in, ECMWF Layers, Bright Sky/DWD, Pirate Weather: disabled)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - OpenMeteoClient initialized (lat=52.3695, lon=9.7505) with persistent cache
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_corrector - INFO - WeatherForecastCorrector initialized (lat=52.3695, lon=9.7505) with ExpertBlender
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - Loaded Open-Meteo cache: 72 hours
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - Open-Meteo file cache loaded successfully
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_corrector - INFO - Loaded Open-Meteo cache: 72 hours, 3 days
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Corrector initialized with Expert Blender - weather_forecast_corrected.json is SINGLE SOURCE OF TRUTH
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Data Pipeline Manager setup complete (V12.3)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Starting Weather Data Pipeline...
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Startup Open-Meteo refresh scheduled (1min delay)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Bootstrap corrected forecast scheduled (5min delay)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Bootstrap integration cache scheduled (6min delay)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Scheduled: Open-Meteo update (3x daily: 06:00, 12:00, 18:00)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Scheduled: Startup Open-Meteo refresh (1min delay after HA boot)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Scheduled: Hourly weather tracking (every hour at :00)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Scheduled: Daily astronomy cache update (06:00 LOCAL)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Scheduled: Pre-midnight data refresh (00:10 LOCAL - fallback before 00:15)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Scheduled: Daily corrected forecast (00:15 LOCAL - before morning routine at 00:25)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Data Pipeline started successfully (7 scheduled listeners)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.coordinator - INFO - Weather Data Pipeline started successfully
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.data.data_state_handler - DEBUG - Loaded expected daily production from daily_forecasts.json: 14.65 kWh (source: fallback_open_meteo_startup_recovery)
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.coordinator - INFO - [SENSOR_INIT] HA still starting - scheduling sensor initialization for after startup
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.production.production_scheduled_tasks - INFO - Scheduled tasks registered:
  Fixed: 00:25 (first forecast), 00:00 (reset), XX:05 (hourly), 23:30 (EOD)
  Adaptive: 12:30 (mode: OFF)
  Dynamic: Scheduled at 00:30 based on sunrise
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.production.production_scheduled_tasks - DEBUG - All dynamic task times already passed for today
2026-02-02 12:02:57 - custom_components.solar_forecast_ml.coordinator - INFO - Solar Forecast Coordinator ready (AI-Ready, 12.87 kWp)
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.sensor - INFO - Setting up sensors: Diagnostic Mode=Enabled, Hourly Sensor=Disabled
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.sensors.sensor_system_status - INFO - System Status Sensor initialized
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.sensor - INFO - Diagnostic mode enabled - Adding 6 advanced diagnostic sensors.
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.sensor - INFO - Shadow Detection enabled - Adding 3 shadow detection sensors
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - Initializing forecast strategies...
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_strategy_base.rule_based - DEBUG - Strategy 'rule_based' initialized.
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - Physics+ML Strategy: 1 panel groups configured
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - Physics+ML Strategy: Local AI available
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - Forecast strategy initialized with 1 panel groups (physics)
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - DEBUG - PhysicsCalibrator stored, will connect when PanelGroupCalculator is created
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.coordinator - INFO - PhysicsCalibrator passed to RuleBasedStrategy - self-learning physics corrections enabled
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - DEBUG - WeatherActualTracker connected for SNOWY bucket detection
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.coordinator - INFO - WeatherActualTracker passed to RuleBasedStrategy - SNOWY bucket detection in forecasts enabled
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.data.data_share_backup - DEBUG - No /share/ backup exists - assuming data is fresh
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.sensor - INFO - Successfully added 27 total sensors.
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.core.core_coordinator_update_helpers - DEBUG - Learning data is fresh - no restore needed
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_weather - DEBUG - No current hour data, using defaults
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_weather - INFO - ✓ Forecast using weather_forecast_corrected.json: 72 hours across 3 days (2026-02-02, 2026-02-03, 2026-02-04)
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.sensors.sensor_data_collector - DEBUG - Collected external sensor data: {'temperature': None, 'humidity': None, 'wind_speed': None, 'rain': None, 'pressure': None, 'solar_radiation': None, 'lux': None}
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - DEBUG - Creating forecast (AI + Physics)...
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - DEBUG - Lag-Feature 'production_yesterday' = 0.00 kWh
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - DEBUG - Physics engine initialized
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.physics.panel_group_calculator - INFO - Panel groups updated: 1 groups, total 12.87 kWp
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.physics.panel_group_calculator - DEBUG - PanelGroupCalculator initialized with 1 groups, total 12.87 kWp, albedo=0.20, sys_eff=0.90
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - PanelGroupCalculator initialized: 1 groups, 12.87 kWp
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.physics.panel_group_calculator - INFO - PhysicsCalibrator attached to PanelGroupCalculator
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - PhysicsCalibrator connected to PanelGroupCalculator for self-learning
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - OpenMeteoClient initialized (lat=52.3695, lon=9.7505) with persistent cache
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.data.data_weather_corrector - INFO - WeatherForecastCorrector initialized (lat=52.3695, lon=9.7505)
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - Forecast complete: Today=21.36 kWh, Tomorrow=19.11 kWh, Day After=30.86 kWh, Method=physics
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.core.core_coordinator_update_helpers - DEBUG - Forecast data from orchestrator: today=21.36 kWh, tomorrow=19.11 kWh, day_after=30.86 kWh, method=physics, hourly_entries=72
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.production.production_history - DEBUG - Peak time calculation: Using stored hourly production data
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - ✓ Tomorrow forecast saved: 2026-02-03 = 19.11 kWh
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - ✓ Day after tomorrow forecast saved: 2026-02-04 = 30.86 kWh
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - ✓ Tomorrow forecast saved: 2026-02-03 = 19.11 kWh
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Multi-day hourly forecast saved: today=30.45, tomorrow=19.11, day_after=30.86 kWh
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.coordinator - DEBUG - Finished fetching solar_forecast_ml data in 0.339 seconds (success: True)
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.sensors.sensor_system_status - DEBUG - Status updated: event=initialization, status=success, state=ok
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.sensors.sensor_system_status - INFO - System Status Sensor successfully added to Home Assistant
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.astronomy.astronomy_cache - INFO - Astronomy Cache initialized: lat=52.36948782131487, lon=9.750484228134157, tz=Europe/Berlin, elev=0m
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.astronomy.astronomy_cache - INFO - AstronomyCache: Panel groups configured (1 groups)
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_astronomy - INFO - AstronomyCache: Panel groups configured (1 groups)
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_astronomy - INFO - Astronomy services initialized: lat=52.36948782131487, lon=9.750484228134157, tz=Europe/Berlin, elev=0m
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_astronomy - INFO - Astronomy cache already exists, skipping auto-build
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_astronomy - INFO - Max peaks not found - auto-extracting from history...
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.astronomy.max_peak_tracker - INFO - Extracting max peak records from history...
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.astronomy.max_peak_tracker - INFO - Max peaks extracted: 0 samples processed, 0 hours updated, global max: 0.0 kWh at hour None
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_astronomy - INFO - ✅ Max peaks auto-extracted: 0 samples, global max: 0.0 kWh
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.astronomy.astronomy_cache_manager - DEBUG - Astronomy cache loaded into memory: 7 days
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_astronomy - INFO - ✅ Astronomy cache loaded into memory for fast access
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_registry - DEBUG - Registered 18 services
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_notification - DEBUG - [OK] Notification 'solar_forecast_ml_startup' created
2026-02-02 12:03:00 - custom_components.solar_forecast_ml - DEBUG - Startup notification triggered
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_extra_features - DEBUG - Extra feature 'esc_easy_sensor_creation' is up-to-date (v6.2.0)
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_extra_features - DEBUG - Extra feature 'grid_price_monitor' is up-to-date (v6.0.0)
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_extra_features - DEBUG - Extra feature 'ml_weather' is up-to-date (v6.2.0)
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_extra_features - DEBUG - Extra feature 'sfml_stats' is up-to-date (v8.0.0)
2026-02-02 12:03:00 - custom_components.solar_forecast_ml.services.service_extra_features - DEBUG - Extra feature 'sfml_stats_lite' is up-to-date (v6.2.0)
2026-02-02 12:03:00 - custom_components.solar_forecast_ml - INFO - ======================================================================
Solar Forecast ML "Sarpeidon" - Setup Complete!
Mode: Hybrid-KI (Full Features)
"The future is not set in stone, but with data we illuminate the path."
Author: Zara-Toorox | Live long and prosper!
======================================================================
2026-02-02 12:03:02 - custom_components.solar_forecast_ml - DEBUG - First data refresh deferred: `async_config_entry_first_refresh` called when config entry state is ConfigEntryState.LOADED, but should only be called in state ConfigEntryState.SETUP_IN_PROGRESS - using cached data
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - Initializing forecast strategies...
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_strategy_base.rule_based - DEBUG - Strategy 'rule_based' initialized.
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - Physics+ML Strategy: 1 panel groups configured
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - Physics+ML Strategy: Local AI available
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - Forecast strategy initialized with 1 panel groups (physics)
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - DEBUG - PhysicsCalibrator stored, will connect when PanelGroupCalculator is created
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.coordinator - INFO - PhysicsCalibrator passed to RuleBasedStrategy - self-learning physics corrections enabled
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - DEBUG - WeatherActualTracker connected for SNOWY bucket detection
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.coordinator - INFO - WeatherActualTracker passed to RuleBasedStrategy - SNOWY bucket detection in forecasts enabled
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.data.data_share_backup - DEBUG - No /share/ backup exists - assuming data is fresh
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.core.core_coordinator_update_helpers - DEBUG - Learning data is fresh - no restore needed
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_weather - DEBUG - No current hour data, using defaults
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_weather - INFO - ✓ Forecast using weather_forecast_corrected.json: 72 hours across 3 days (2026-02-02, 2026-02-03, 2026-02-04)
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.sensors.sensor_data_collector - DEBUG - Collected external sensor data: {'temperature': None, 'humidity': None, 'wind_speed': None, 'rain': None, 'pressure': None, 'solar_radiation': None, 'lux': None}
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - DEBUG - Creating forecast (AI + Physics)...
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - DEBUG - Lag-Feature 'production_yesterday' = 0.00 kWh
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - DEBUG - Physics engine initialized
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.physics.panel_group_calculator - INFO - Panel groups updated: 1 groups, total 12.87 kWp
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.physics.panel_group_calculator - DEBUG - PanelGroupCalculator initialized with 1 groups, total 12.87 kWp, albedo=0.20, sys_eff=0.90
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - PanelGroupCalculator initialized: 1 groups, 12.87 kWp
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.physics.panel_group_calculator - INFO - PhysicsCalibrator attached to PanelGroupCalculator
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - PhysicsCalibrator connected to PanelGroupCalculator for self-learning
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - OpenMeteoClient initialized (lat=52.3695, lon=9.7505) with persistent cache
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.data.data_weather_corrector - INFO - WeatherForecastCorrector initialized (lat=52.3695, lon=9.7505)
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - Forecast complete: Today=21.36 kWh, Tomorrow=19.11 kWh, Day After=30.86 kWh, Method=physics
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.core.core_coordinator_update_helpers - DEBUG - Forecast data from orchestrator: today=21.36 kWh, tomorrow=19.11 kWh, day_after=30.86 kWh, method=physics, hourly_entries=72
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.production.production_history - DEBUG - Peak time calculation: Using stored hourly production data
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - ✓ Tomorrow forecast saved: 2026-02-03 = 19.11 kWh
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - ✓ Day after tomorrow forecast saved: 2026-02-04 = 30.86 kWh
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - ✓ Tomorrow forecast saved: 2026-02-03 = 19.11 kWh
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Multi-day hourly forecast saved: today=30.45, tomorrow=19.11, day_after=30.86 kWh
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.coordinator - DEBUG - Finished fetching solar_forecast_ml data in 0.042 seconds (success: True)
2026-02-02 12:03:10 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Fetching weather data from Open-Meteo...
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.forecast.forecast_weather - INFO - Force update - fetching from Open-Meteo API...
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.data.data_open_meteo_client - DEBUG - Loaded 3 existing days from cache
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - Saved Open-Meteo cache: 72 hours, 3 days (in-memory cache also updated)
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - Fetched 72 hours from Open-Meteo (GHI range: 0 - 365 W/m²)
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.data.data_open_meteo_client - DEBUG - Loaded 3 existing days from cache
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - Saved Open-Meteo cache: 72 hours, 3 days (in-memory cache also updated)
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.forecast.forecast_weather - INFO - Force update successful: 72 hours
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Open-Meteo startup refresh SUCCESS
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - DEBUG - Pipeline: Open-Meteo cache is current (72 hours cached)
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - DEBUG - Pipeline: wttr.in cache updated
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - DEBUG - Pipeline: Bright Sky cache updated
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Expert weather sources (force=False): wttr.in: OK, Bright Sky: OK, Pirate Weather: disabled (no API key)
2026-02-02 12:03:57 - custom_components.solar_forecast_ml.coordinator - INFO - [SENSOR_INIT] Home Assistant fully started - beginning sensor initialization
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.data.data_panel_group_sensor_reader - DEBUG - Loaded panel group sensor state: 0 groups
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.coordinator - INFO - Panel groups configuration: 1 groups
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.coordinator - DEBUG -   Group 0: name=Gruppe 1, energy_sensor=sensor.solar_panel_production_daily
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.coordinator - INFO - Panel group sensor reader initialized: 1 energy sensors validated
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.coordinator - INFO - Panel group sensor validation scheduled (background task)
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [PRODUCTION_TRACKER] start_tracking called with power_entity=sensor.solar_panel_production_w
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [PRODUCTION_TRACKER] Power entity found: sensor.solar_panel_production_w = 111.94
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.production.production_tracker - INFO - Loaded production time state from production_time_state.json: accumulated=0.00h, active=True, start_time=2026-02-02T11:58:47.534779+01:00
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [OK] Restored production time state: accumulated=0.00h, active=True
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=312s
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [OK] Synced production time to daily_forecasts.json: duration=312s (00:05:12)
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [PRODUCTION_TRACKER] State listener registered for sensor.solar_panel_production_w
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [PRODUCTION_TRACKER] State loaded - checking sensor. Current state: 111.94
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.production.production_tracker - INFO - Production time tracking started for sensor.solar_panel_production_w
2026-02-02 12:03:59 - custom_components.solar_forecast_ml.coordinator - INFO - [SENSOR_INIT] Delayed sensor initialization completed
2026-02-02 12:04:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=312s
2026-02-02 12:04:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=342s
2026-02-02 12:05:00 - custom_components.solar_forecast_ml.production.production_scheduled_tasks - DEBUG - No previous yield available for hour 11 - first run after restart, will be available next hour
2026-02-02 12:05:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=372s
2026-02-02 12:05:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=402s
2026-02-02 12:06:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=432s
2026-02-02 12:06:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=462s
2026-02-02 12:07:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=492s
2026-02-02 12:07:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=522s
2026-02-02 12:07:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Bootstrap corrected forecast - executing now...
2026-02-02 12:07:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - DEBUG - Pipeline: Forecast staleness check OK - latest forecast 58.9h ahead
2026-02-02 12:07:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: weather_forecast_corrected.json exists and is current - SKIP BOOTSTRAP
2026-02-02 12:08:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=552s
2026-02-02 12:08:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=582s
2026-02-02 12:08:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Bootstrap integration cache - executing now...
2026-02-02 12:08:57 - custom_components.solar_forecast_ml.data.data_weather_corrector - DEBUG - Integration cache already exists - skip bootstrap
2026-02-02 12:08:57 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Integration cache bootstrap SUCCESS - ML Weather integration can now use weather_integration_ml.json
2026-02-02 12:09:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=612s
2026-02-02 12:09:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=642s
2026-02-02 12:09:39 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 120.80W at 12:09:39
2026-02-02 12:09:39 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 120.80W at 12:09:39
2026-02-02 12:09:39 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 120.80W on 2026-02-02
2026-02-02 12:09:39 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:09:39 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 120.80W on 2026-02-02
2026-02-02 12:09:39 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 120.80W on 2026-02-02
2026-02-02 12:10:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=672s
2026-02-02 12:10:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=702s
2026-02-02 12:11:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=732s
2026-02-02 12:11:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=762s
2026-02-02 12:12:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=792s
2026-02-02 12:12:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=822s
2026-02-02 12:13:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=852s
2026-02-02 12:13:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=882s
2026-02-02 12:14:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=912s
2026-02-02 12:14:04 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 124.63W at 12:14:04
2026-02-02 12:14:04 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 124.63W at 12:14:04
2026-02-02 12:14:04 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 124.63W on 2026-02-02
2026-02-02 12:14:04 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:14:04 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 124.63W on 2026-02-02
2026-02-02 12:14:04 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 124.63W on 2026-02-02
2026-02-02 12:14:10 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 124.99W at 12:14:10
2026-02-02 12:14:10 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 124.99W on 2026-02-02
2026-02-02 12:14:10 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:14:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=942s
2026-02-02 12:14:49 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 125.09W at 12:14:49
2026-02-02 12:14:49 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 125.09W on 2026-02-02
2026-02-02 12:14:49 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:15:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=972s
2026-02-02 12:15:19 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 126.41W at 12:15:19
2026-02-02 12:15:19 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 126.41W at 12:15:19
2026-02-02 12:15:19 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 126.41W on 2026-02-02
2026-02-02 12:15:19 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:15:19 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 126.41W on 2026-02-02
2026-02-02 12:15:19 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 126.41W on 2026-02-02
2026-02-02 12:15:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=1002s
2026-02-02 12:15:39 - custom_components.solar_forecast_ml - INFO - Options updated, reloading integration to apply changes...
2026-02-02 12:15:39 - custom_components.solar_forecast_ml - INFO - Unloading Solar Forecast ML integration...
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Stopping Weather Data Pipeline...
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Data Pipeline stopped
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=1011s
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=False, duration=1011s
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.production.production_tracker - INFO - Production time tracking stopped
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - DEBUG - Power peak tracking listener removed
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - DEBUG - Weekly retraining listener removed
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - DEBUG - Daily backup sync listener removed
2026-02-02 12:15:39 - custom_components.solar_forecast_ml - INFO - Solar Forecast ML integration unloaded successfully
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Stopping Weather Data Pipeline...
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Data Pipeline stopped
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=False, duration=1011s
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.production.production_tracker - INFO - Production time tracking stopped
2026-02-02 12:15:39 - custom_components.solar_forecast_ml - DEBUG - File logging already initialized - skipping (prevents duplicate handlers)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.core.core_dependency_handler - INFO - Checking dependencies...
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.core.core_dependency_handler - DEBUG - [OK] numpy is functional (Version: 2.3.2)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.core.core_dependency_handler - DEBUG - [OK] aiofiles is functional
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.core.core_dependency_handler - INFO - [OK] All dependencies are present
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_notification - DEBUG - NotificationService instance created
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_notification - INFO - [OK] NotificationService successfully initialized
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_notification - INFO - [OK] NotificationService created successfully
2026-02-02 12:15:39 - custom_components.solar_forecast_ml - DEBUG - NotificationService created and stored in hass.data
2026-02-02 12:15:39 - custom_components.solar_forecast_ml - DEBUG - V13.1 Migration: No 'Default' panel group found - data already clean
2026-02-02 12:15:39 - custom_components.solar_forecast_ml - DEBUG - Already installed (flag exists in .storage)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - ============================================================
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - STARTUP INITIALIZER - Creating critical pre-async files
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - ============================================================
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_startup_initializer - DEBUG - Created/verified 8 directories
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - Directory structure ready
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - open_meteo_cache.json ready
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - astronomy_cache.json ready
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - weather_forecast_corrected.json ready
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - daily_forecasts.json ready
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - ============================================================
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - STARTUP INITIALIZER complete - 4 critical files ready
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_startup_initializer - INFO - ============================================================
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.core.core_coordinator_init_helpers - INFO - Panel groups configured: 1 groups, total 12.87 kWp
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.core.core_coordinator_init_helpers - INFO - Inverter clipping enabled: max 10.00 kW (forecasts capped, clipped hours excluded from training)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_manager - INFO - DataManager Facade initialized with specialized handlers
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.sensors.sensor_data_collector - DEBUG - SensorDataCollector initialized with centralized sensor mapping.
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.production.production_history - INFO - ProductionCalculator initialized (Recorder-free mode)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.production.production_tracker - INFO - ProductionTimeCalculator (Live Tracking) initialized with LOCAL time and persistence
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - ForecastOrchestrator initialized with 1 panel groups.
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.production.production_adaptive_forecast - DEBUG - AdaptiveForecastEngine initialized
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.production.production_scheduled_tasks - DEBUG - ScheduledTasksManager initialized
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_error_handler - INFO - ErrorHandlingService initialized.
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - DEBUG - SolarForecastMLCoordinator initialized
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_manager - INFO - DataManager: Running schema validation (creates missing files)...
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO - === JSON Schema Validation Starting ===
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO - SCHEMA: learned_weights.json missing (AI will train when ready)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_schema_validator - DEBUG - Self-heal astronomy_cache.json: added missing 'pv_system.max_peak_conditions.sun_elevation_deg'
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_schema_validator - DEBUG - Self-heal astronomy_cache.json: added missing 'pv_system.max_peak_conditions.cloud_cover_percent'
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_schema_validator - DEBUG - Self-heal astronomy_cache.json: added missing 'pv_system.max_peak_conditions.temperature_c'
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_schema_validator - DEBUG - Self-heal astronomy_cache.json: added missing 'pv_system.max_peak_conditions.solar_radiation_wm2'
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO - SCHEMA: Self-healed astronomy_cache.json (added missing fields)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO - === Schema Validation Summary ===
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO -   learned_weights.json missing (AI will train when ready)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO -   Self-healed astronomy_cache.json (added missing fields)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO - Self-healed 1 file(s): astronomy_cache.json
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_schema_validator - INFO - === JSON Schema Validation Complete ===
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_manager - INFO - JSON schema validation completed successfully ✓
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_manager - INFO - DataManager: All 7 required files present ✓
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_manager - INFO - DataManager initialized successfully
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_manager - DEBUG - DataManager async initialization complete (template-based, no action needed)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - INFO - ShareBackupManager initialized - learning data protection enabled
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - DEBUG - Daily backup sync scheduled for 4:00 AM
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.ai.ai_predictor - INFO - AIPredictor initialized: 1 groups, 12.87 kWp total
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.ai.ai_dni_tracker - INFO - DniTracker initialized
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.ai.ai_seasonal - INFO - SeasonalAdjuster initialized
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.ai.ai_dni_tracker - INFO - DNI tracker loaded
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.ai.ai_seasonal - INFO - Seasonal factors loaded
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.ai.ai_feature_engineering - INFO - FeatureEngineer initialized: 20 features (normalized)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.ai.ai_tiny_lstm - INFO - TinyLSTM initialized: input=20, hidden=32, seq=24, outputs=1, attention=True
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.ai.ai_tiny_ridge - INFO - TinyRidge initialized: input=20, seq=24, flat_size=480, outputs=1
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.ai.ai_predictor - INFO - Models initialized: 20 features, 1 outputs, 1 groups, attention=True
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.ai.ai_predictor - INFO - No weights found - model untrained (1 outputs)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.physics.physics_calibrator - INFO - PhysicsCalibrator initialized
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.physics.physics_calibrator - DEBUG - Loaded calibration config: 0 groups, 0 bucket factors
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.physics.physics_calibrator - DEBUG - Frost migration already completed (version >= 3.0)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.physics.physics_calibrator - INFO - PhysicsCalibrator: No existing calibration data found
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - INFO - PhysicsCalibrator initialized for self-learning corrections
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.astronomy.astronomy_cache - INFO - AstronomyCache: Panel groups configured (1 groups)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - INFO - AstronomyCache: Panel groups set (1 groups)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.astronomy.astronomy_cache - INFO - Astronomy Cache initialized: lat=52.36948782131487, lon=9.750484228134157, tz=Europe/Berlin, elev=0m
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Data Pipeline Manager initialized - 5-Source Expert Blending (V12.3)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.astronomy.astronomy_cache_manager - DEBUG - Astronomy cache loaded into memory: 7 days
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Setting up Weather Data Pipeline Manager (5-Source Expert Blending)...
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - OpenMeteoClient initialized (lat=52.3695, lon=9.7505) with persistent cache
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_weather - INFO - WeatherService initialized - Open-Meteo (lat=52.3695, lon=9.7505)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Service initialized (lat=52.3695, lon=9.7505)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_precision - INFO - WeatherPrecisionTracker initialized with sensors: []
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - INFO - PirateWeatherExpert disabled - no API key configured. Get free key at https://pirate-weather.apiable.io/
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - INFO - WeatherExpertBlender initialized with 5 experts (4 active): open_meteo, wttr_in, ecmwf_layers, bright_sky
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - INFO - Loaded expert weights from weather_expert_weights.json (last updated: None)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - DEBUG - wttr.in: Restored memory cache from file (age: 0.3h, valid for 5.7h more)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - DEBUG - WttrInExpert: Loaded 3 days from file cache
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - DEBUG - Bright Sky: Restored memory cache from file (age: 0.3h, valid for 2.7h more, 48 visibility entries)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - DEBUG - Bright Sky: Loaded 4 days from file cache
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - INFO - WeatherExpertLearner initialized (solar_radiation_sensor=not configured - using production fallback)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_visibility_learner - INFO - VisibilityLearner initialized (solar_radiation_sensor=not configured - using static weights)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_visibility_learner - DEBUG - VisibilityLearner: No saved weights, using defaults
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - DEBUG - VisibilityLearner connected to WeatherExpertBlender
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_expert_blender - DEBUG - VisibilityLearner connected to WeatherExpertLearner
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - VisibilityLearner initialized (active=False)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Expert Blender initialized with 4 active experts (Open-Meteo, wttr.in, ECMWF Layers, Bright Sky/DWD, Pirate Weather: disabled)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - OpenMeteoClient initialized (lat=52.3695, lon=9.7505) with persistent cache
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_corrector - INFO - WeatherForecastCorrector initialized (lat=52.3695, lon=9.7505) with ExpertBlender
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - Loaded Open-Meteo cache: 72 hours
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - Open-Meteo file cache loaded successfully
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_corrector - INFO - Loaded Open-Meteo cache: 72 hours, 3 days
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Corrector initialized with Expert Blender - weather_forecast_corrected.json is SINGLE SOURCE OF TRUTH
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Data Pipeline Manager setup complete (V12.3)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Starting Weather Data Pipeline...
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Startup Open-Meteo refresh scheduled (1min delay)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Bootstrap corrected forecast scheduled (5min delay)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Bootstrap integration cache scheduled (6min delay)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Scheduled: Open-Meteo update (3x daily: 06:00, 12:00, 18:00)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Scheduled: Startup Open-Meteo refresh (1min delay after HA boot)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Scheduled: Hourly weather tracking (every hour at :00)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Scheduled: Daily astronomy cache update (06:00 LOCAL)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Scheduled: Pre-midnight data refresh (00:10 LOCAL - fallback before 00:15)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Scheduled: Daily corrected forecast (00:15 LOCAL - before morning routine at 00:25)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Weather Data Pipeline started successfully (7 scheduled listeners)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - INFO - Weather Data Pipeline started successfully
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_state_handler - DEBUG - Loaded expected daily production from daily_forecasts.json: 14.65 kWh (source: fallback_open_meteo_startup_recovery)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - INFO - [SENSOR_INIT] HA already running - starting sensor initialization immediately
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - INFO - [SENSOR_INIT] Home Assistant fully started - beginning sensor initialization
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.production.production_scheduled_tasks - INFO - Scheduled tasks registered:
  Fixed: 00:25 (first forecast), 00:00 (reset), XX:05 (hourly), 23:30 (EOD)
  Adaptive: 12:30 (mode: OFF)
  Dynamic: Scheduled at 00:30 based on sunrise
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.production.production_scheduled_tasks - DEBUG - All dynamic task times already passed for today
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - INFO - Solar Forecast Coordinator ready (AI-Ready, 12.87 kWp)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.sensor - INFO - Setting up sensors: Diagnostic Mode=Enabled, Hourly Sensor=Disabled
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.sensors.sensor_system_status - INFO - System Status Sensor initialized
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.sensor - INFO - Diagnostic mode enabled - Adding 6 advanced diagnostic sensors.
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.sensor - INFO - Shadow Detection enabled - Adding 3 shadow detection sensors
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - Initializing forecast strategies...
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_strategy_base.rule_based - DEBUG - Strategy 'rule_based' initialized.
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - Physics+ML Strategy: 1 panel groups configured
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - Physics+ML Strategy: Local AI available
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - Forecast strategy initialized with 1 panel groups (physics)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - DEBUG - PhysicsCalibrator stored, will connect when PanelGroupCalculator is created
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - INFO - PhysicsCalibrator passed to RuleBasedStrategy - self-learning physics corrections enabled
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - DEBUG - WeatherActualTracker connected for SNOWY bucket detection
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - INFO - WeatherActualTracker passed to RuleBasedStrategy - SNOWY bucket detection in forecasts enabled
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.sensor - INFO - Successfully added 27 total sensors.
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_share_backup - DEBUG - No /share/ backup exists - assuming data is fresh
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.core.core_coordinator_update_helpers - DEBUG - Learning data is fresh - no restore needed
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_weather - DEBUG - No current hour data, using defaults
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_weather - INFO - ✓ Forecast using weather_forecast_corrected.json: 72 hours across 3 days (2026-02-02, 2026-02-03, 2026-02-04)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.sensors.sensor_data_collector - DEBUG - Collected external sensor data: {'temperature': None, 'humidity': None, 'wind_speed': None, 'rain': None, 'pressure': None, 'solar_radiation': None, 'lux': None}
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - DEBUG - Creating forecast (AI + Physics)...
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - DEBUG - Lag-Feature 'production_yesterday' = 0.00 kWh
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - DEBUG - Physics engine initialized
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.physics.panel_group_calculator - INFO - Panel groups updated: 1 groups, total 12.87 kWp
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.physics.panel_group_calculator - DEBUG - PanelGroupCalculator initialized with 1 groups, total 12.87 kWp, albedo=0.20, sys_eff=0.90
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - PanelGroupCalculator initialized: 1 groups, 12.87 kWp
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.physics.panel_group_calculator - INFO - PhysicsCalibrator attached to PanelGroupCalculator
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - PhysicsCalibrator connected to PanelGroupCalculator for self-learning
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - OpenMeteoClient initialized (lat=52.3695, lon=9.7505) with persistent cache
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_weather_corrector - INFO - WeatherForecastCorrector initialized (lat=52.3695, lon=9.7505)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - Forecast complete: Today=21.36 kWh, Tomorrow=19.11 kWh, Day After=30.86 kWh, Method=physics
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.core.core_coordinator_update_helpers - DEBUG - Forecast data from orchestrator: today=21.36 kWh, tomorrow=19.11 kWh, day_after=30.86 kWh, method=physics, hourly_entries=72
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.production.production_history - DEBUG - Peak time calculation: Using stored hourly production data
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - ✓ Tomorrow forecast saved: 2026-02-03 = 19.11 kWh
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - ✓ Day after tomorrow forecast saved: 2026-02-04 = 30.86 kWh
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - ✓ Tomorrow forecast saved: 2026-02-03 = 19.11 kWh
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Multi-day hourly forecast saved: today=30.45, tomorrow=19.11, day_after=30.86 kWh
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.coordinator - DEBUG - Finished fetching solar_forecast_ml data in 0.036 seconds (success: True)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.sensors.sensor_system_status - DEBUG - Status updated: event=initialization, status=success, state=ok
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.sensors.sensor_system_status - INFO - System Status Sensor successfully added to Home Assistant
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.astronomy.astronomy_cache - INFO - Astronomy Cache initialized: lat=52.36948782131487, lon=9.750484228134157, tz=Europe/Berlin, elev=0m
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.astronomy.astronomy_cache - INFO - AstronomyCache: Panel groups configured (1 groups)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_astronomy - INFO - AstronomyCache: Panel groups configured (1 groups)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_astronomy - INFO - Astronomy services initialized: lat=52.36948782131487, lon=9.750484228134157, tz=Europe/Berlin, elev=0m
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_astronomy - INFO - Astronomy cache already exists, skipping auto-build
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_astronomy - INFO - Max peaks not found - auto-extracting from history...
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.astronomy.max_peak_tracker - INFO - Extracting max peak records from history...
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.astronomy.max_peak_tracker - INFO - Max peaks extracted: 0 samples processed, 0 hours updated, global max: 0.0 kWh at hour None
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_astronomy - INFO - ✅ Max peaks auto-extracted: 0 samples, global max: 0.0 kWh
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.astronomy.astronomy_cache_manager - DEBUG - Astronomy cache loaded into memory: 7 days
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_astronomy - INFO - ✅ Astronomy cache loaded into memory for fast access
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_registry - DEBUG - Registered 18 services
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_notification - DEBUG - [OK] Notification 'solar_forecast_ml_startup' created
2026-02-02 12:15:39 - custom_components.solar_forecast_ml - DEBUG - Startup notification triggered
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_extra_features - DEBUG - Extra feature 'esc_easy_sensor_creation' is up-to-date (v6.2.0)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_extra_features - DEBUG - Extra feature 'grid_price_monitor' is up-to-date (v6.0.0)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_extra_features - DEBUG - Extra feature 'ml_weather' is up-to-date (v6.2.0)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_extra_features - DEBUG - Extra feature 'sfml_stats' is up-to-date (v8.0.0)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml.services.service_extra_features - DEBUG - Extra feature 'sfml_stats_lite' is up-to-date (v6.2.0)
2026-02-02 12:15:39 - custom_components.solar_forecast_ml - INFO - ======================================================================
Solar Forecast ML "Sarpeidon" - Setup Complete!
Mode: Hybrid-KI (Full Features)
"The future is not set in stone, but with data we illuminate the path."
Author: Zara-Toorox | Live long and prosper!
======================================================================
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.data.data_panel_group_sensor_reader - DEBUG - Loaded panel group sensor state: 0 groups
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.coordinator - INFO - Panel groups configuration: 1 groups
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.coordinator - DEBUG -   Group 0: name=Gruppe 1, energy_sensor=sensor.solar_panel_production_daily
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.coordinator - INFO - Panel group sensor reader initialized: 1 energy sensors validated
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.coordinator - INFO - Panel group sensor validation scheduled (background task)
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [PRODUCTION_TRACKER] start_tracking called with power_entity=sensor.solar_panel_production_w
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [PRODUCTION_TRACKER] Power entity found: sensor.solar_panel_production_w = 117.91
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.production.production_tracker - INFO - Loaded production time state from production_time_state.json: accumulated=0.28h, active=False, start_time=None
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [OK] Restored production time state: accumulated=0.28h, active=False
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=False, duration=1011s
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [OK] Synced production time to daily_forecasts.json: duration=1011s (00:16:51)
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [PRODUCTION_TRACKER] State listener registered for sensor.solar_panel_production_w
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [PRODUCTION_TRACKER] State loaded - checking sensor. Current state: 117.91
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.production.production_tracker - INFO - [PRODUCTION_TRACKER] [OK] Restored inactive state but sensor shows 117.91W - starting production tracking now
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.production.production_tracker - INFO - Production time tracking started for sensor.solar_panel_production_w
2026-02-02 12:15:41 - custom_components.solar_forecast_ml.coordinator - INFO - [SENSOR_INIT] Delayed sensor initialization completed
2026-02-02 12:15:44 - custom_components.solar_forecast_ml - DEBUG - First data refresh deferred: `async_config_entry_first_refresh` called when config entry state is ConfigEntryState.LOADED, but should only be called in state ConfigEntryState.SETUP_IN_PROGRESS - using cached data
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - Initializing forecast strategies...
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_strategy_base.rule_based - DEBUG - Strategy 'rule_based' initialized.
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - Physics+ML Strategy: 1 panel groups configured
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - Physics+ML Strategy: Local AI available
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - Forecast strategy initialized with 1 panel groups (physics)
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - DEBUG - PhysicsCalibrator stored, will connect when PanelGroupCalculator is created
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.coordinator - INFO - PhysicsCalibrator passed to RuleBasedStrategy - self-learning physics corrections enabled
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - DEBUG - WeatherActualTracker connected for SNOWY bucket detection
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.coordinator - INFO - WeatherActualTracker passed to RuleBasedStrategy - SNOWY bucket detection in forecasts enabled
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.data.data_share_backup - DEBUG - No /share/ backup exists - assuming data is fresh
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.core.core_coordinator_update_helpers - DEBUG - Learning data is fresh - no restore needed
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_weather - DEBUG - No current hour data, using defaults
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_weather - INFO - ✓ Forecast using weather_forecast_corrected.json: 72 hours across 3 days (2026-02-02, 2026-02-03, 2026-02-04)
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.sensors.sensor_data_collector - DEBUG - Collected external sensor data: {'temperature': None, 'humidity': None, 'wind_speed': None, 'rain': None, 'pressure': None, 'solar_radiation': None, 'lux': None}
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - DEBUG - Creating forecast (AI + Physics)...
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - DEBUG - Lag-Feature 'production_yesterday' = 0.00 kWh
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - DEBUG - Physics engine initialized
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.physics.panel_group_calculator - INFO - Panel groups updated: 1 groups, total 12.87 kWp
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.physics.panel_group_calculator - DEBUG - PanelGroupCalculator initialized with 1 groups, total 12.87 kWp, albedo=0.20, sys_eff=0.90
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - PanelGroupCalculator initialized: 1 groups, 12.87 kWp
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.physics.panel_group_calculator - INFO - PhysicsCalibrator attached to PanelGroupCalculator
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_rule_based_strategy - INFO - PhysicsCalibrator connected to PanelGroupCalculator for self-learning
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - OpenMeteoClient initialized (lat=52.3695, lon=9.7505) with persistent cache
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.data.data_weather_corrector - INFO - WeatherForecastCorrector initialized (lat=52.3695, lon=9.7505)
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.forecast.forecast_orchestrator - INFO - Forecast complete: Today=21.36 kWh, Tomorrow=19.11 kWh, Day After=30.86 kWh, Method=physics
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.core.core_coordinator_update_helpers - DEBUG - Forecast data from orchestrator: today=21.36 kWh, tomorrow=19.11 kWh, day_after=30.86 kWh, method=physics, hourly_entries=72
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.production.production_history - DEBUG - Peak time calculation: Using stored hourly production data
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - ✓ Tomorrow forecast saved: 2026-02-03 = 19.11 kWh
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - ✓ Day after tomorrow forecast saved: 2026-02-04 = 30.86 kWh
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - ✓ Tomorrow forecast saved: 2026-02-03 = 19.11 kWh
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Multi-day hourly forecast saved: today=30.45, tomorrow=19.11, day_after=30.86 kWh
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.coordinator - DEBUG - Finished fetching solar_forecast_ml data in 0.056 seconds (success: True)
2026-02-02 12:15:49 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:16:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=1029s
2026-02-02 12:16:28 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 127.28W at 12:16:28
2026-02-02 12:16:28 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 127.28W on 2026-02-02
2026-02-02 12:16:28 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:16:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=1059s
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Fetching weather data from Open-Meteo...
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.forecast.forecast_weather - INFO - Force update - fetching from Open-Meteo API...
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.data.data_open_meteo_client - DEBUG - Loaded 3 existing days from cache
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - Saved Open-Meteo cache: 72 hours, 3 days (in-memory cache also updated)
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - Fetched 72 hours from Open-Meteo (GHI range: 0 - 365 W/m²)
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.data.data_open_meteo_client - DEBUG - Loaded 3 existing days from cache
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.data.data_open_meteo_client - INFO - Saved Open-Meteo cache: 72 hours, 3 days (in-memory cache also updated)
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.forecast.forecast_weather - INFO - Force update successful: 72 hours
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Open-Meteo startup refresh SUCCESS
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - DEBUG - Pipeline: Open-Meteo cache is current (72 hours cached)
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - DEBUG - Pipeline: wttr.in cache updated
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - DEBUG - Pipeline: Bright Sky cache updated
2026-02-02 12:16:39 - custom_components.solar_forecast_ml.data.data_weather_pipeline_manager - INFO - Pipeline: Expert weather sources (force=False): wttr.in: OK, Bright Sky: OK, Pirate Weather: disabled (no API key)
2026-02-02 12:17:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=1089s
2026-02-02 12:17:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=1119s
2026-02-02 12:17:31 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 128.28W at 12:17:31
2026-02-02 12:17:31 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 128.28W at 12:17:31
2026-02-02 12:17:31 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 128.28W on 2026-02-02
2026-02-02 12:17:31 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:17:31 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 128.28W on 2026-02-02
2026-02-02 12:17:31 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 128.28W on 2026-02-02
2026-02-02 12:18:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=1149s
2026-02-02 12:18:07 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 128.51W at 12:18:07
2026-02-02 12:18:07 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 128.51W on 2026-02-02
2026-02-02 12:18:07 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:18:22 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - New peak today: 132.51W at 12:18:22
2026-02-02 12:18:22 - custom_components.solar_forecast_ml.data.data_forecast_handler - INFO - NEW ALL-TIME PEAK: 132.51W on 2026-02-02
2026-02-02 12:18:22 - custom_components.solar_forecast_ml.sensors.sensor_base - DEBUG - PeakProductionHourSensor: No best_hour_today found in file
2026-02-02 12:18:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=1179s
2026-02-02 12:19:00 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=1209s
2026-02-02 12:19:30 - custom_components.solar_forecast_ml.data.data_forecast_handler - DEBUG - Production time updated: active=True, duration=1239s
