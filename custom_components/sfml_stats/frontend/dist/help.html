<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SFML Stats - Sensor Configuration Help</title>

    <!-- Vue 3 -->
    <script src="https://cdn.jsdelivr.net/npm/vue@3.4.21/dist/vue.global.prod.js"></script>

    <style>
        :root {
            --bg-primary: #0a0a1a;
            --bg-secondary: #0d1117;
            --bg-card: #161b22;
            --bg-card-hover: #1c2128;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --neon-cyan: #00d4ff;
            --neon-green: #22c55e;
            --neon-yellow: #ffd60a;
            --neon-pink: #ff2e97;
            --neon-purple: #8b5cf6;
            --border-color: #30363d;
            --glow-cyan: 0 0 20px rgba(0, 212, 255, 0.3);
            --glow-green: 0 0 20px rgba(34, 197, 94, 0.3);
            --glow-yellow: 0 0 20px rgba(255, 214, 10, 0.3);
            --glow-pink: 0 0 20px rgba(255, 46, 151, 0.3);
            --glow-purple: 0 0 20px rgba(139, 92, 246, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: var(--bg-secondary); }
        ::-webkit-scrollbar-thumb { background: var(--border-color); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--neon-cyan); }

        /* Header */
        .header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-card) 100%);
            border-bottom: 1px solid var(--border-color);
            padding: 20px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }

        .header h1 {
            font-size: 1.5rem;
            font-weight: 600;
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header-controls {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .lang-toggle {
            display: flex;
            background: var(--bg-primary);
            border-radius: 8px;
            padding: 4px;
            border: 1px solid var(--border-color);
        }

        .lang-btn {
            padding: 8px 16px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            cursor: pointer;
            border-radius: 6px;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .lang-btn.active {
            background: var(--neon-cyan);
            color: var(--bg-primary);
            box-shadow: var(--glow-cyan);
        }

        .back-btn {
            padding: 10px 20px;
            background: linear-gradient(135deg, var(--neon-purple), var(--neon-pink));
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .back-btn:hover {
            transform: translateY(-2px);
            box-shadow: var(--glow-purple);
        }

        /* Main Content */
        .main-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px;
        }

        .intro {
            text-align: center;
            margin-bottom: 40px;
            padding: 30px;
            background: linear-gradient(135deg, rgba(0, 212, 255, 0.1), rgba(139, 92, 246, 0.1));
            border-radius: 16px;
            border: 1px solid var(--border-color);
        }

        .intro h2 {
            font-size: 1.8rem;
            margin-bottom: 12px;
            color: var(--neon-cyan);
        }

        .intro p {
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto;
        }

        /* Category Sections */
        .category {
            margin-bottom: 40px;
        }

        .category-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 12px;
            border-bottom: 2px solid var(--border-color);
        }

        .category-icon {
            font-size: 2rem;
        }

        .category-title {
            font-size: 1.4rem;
            font-weight: 600;
        }

        .category-title.solar { color: var(--neon-yellow); }
        .category-title.battery { color: var(--neon-green); }
        .category-title.grid { color: var(--neon-purple); }
        .category-title.house { color: var(--neon-cyan); }
        .category-title.consumer { color: var(--neon-pink); }
        .category-title.weather { color: #60a5fa; }
        .category-title.billing { color: #f97316; }
        .category-title.forecast { color: #a855f7; }

        /* Sensor Grid */
        .sensor-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
            gap: 16px;
        }

        .sensor-card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .sensor-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--neon-cyan), var(--neon-purple));
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .sensor-card:hover {
            background: var(--bg-card-hover);
            transform: translateY(-4px);
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
        }

        .sensor-card:hover::before {
            opacity: 1;
        }

        .sensor-card.solar:hover { border-color: var(--neon-yellow); box-shadow: var(--glow-yellow); }
        .sensor-card.battery:hover { border-color: var(--neon-green); box-shadow: var(--glow-green); }
        .sensor-card.grid:hover { border-color: var(--neon-purple); box-shadow: var(--glow-purple); }
        .sensor-card.house:hover { border-color: var(--neon-cyan); box-shadow: var(--glow-cyan); }
        .sensor-card.consumer:hover { border-color: var(--neon-pink); box-shadow: var(--glow-pink); }

        .sensor-name {
            font-weight: 600;
            font-size: 1rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .sensor-key {
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.75rem;
            color: var(--neon-cyan);
            background: rgba(0, 212, 255, 0.1);
            padding: 2px 8px;
            border-radius: 4px;
            margin-bottom: 8px;
            display: inline-block;
        }

        .sensor-desc {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .sensor-required {
            position: absolute;
            top: 12px;
            right: 12px;
            font-size: 0.7rem;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
        }

        .sensor-required.required {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.3);
        }

        .sensor-required.optional {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.3);
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            padding: 20px;
            animation: fadeIn 0.2s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            max-width: 700px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease;
        }

        @keyframes slideUp {
            from { transform: translateY(20px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            position: sticky;
            top: 0;
            background: var(--bg-secondary);
            z-index: 10;
        }

        .modal-header h3 {
            font-size: 1.3rem;
            margin-bottom: 8px;
        }

        .modal-header .sensor-key {
            font-size: 0.85rem;
        }

        .modal-close {
            background: transparent;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
            padding: 4px 12px;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: var(--bg-card);
            color: var(--neon-pink);
        }

        .modal-body {
            padding: 24px;
        }

        .modal-section {
            margin-bottom: 24px;
        }

        .modal-section:last-child {
            margin-bottom: 0;
        }

        .modal-section h4 {
            font-size: 0.9rem;
            color: var(--neon-cyan);
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .modal-section p {
            color: var(--text-secondary);
            line-height: 1.7;
        }

        .info-box {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            padding: 8px 0;
            border-bottom: 1px solid var(--border-color);
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            color: var(--text-muted);
        }

        .info-value {
            color: var(--text-primary);
            font-weight: 500;
        }

        .code-block {
            background: #1a1a2e;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 16px;
            font-family: 'Fira Code', 'Consolas', monospace;
            font-size: 0.85rem;
            overflow-x: auto;
            color: var(--neon-green);
        }

        .code-block .comment {
            color: var(--text-muted);
        }

        .code-block .entity {
            color: var(--neon-yellow);
        }

        .tip-box {
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid rgba(0, 212, 255, 0.3);
            border-radius: 8px;
            padding: 16px;
            display: flex;
            gap: 12px;
        }

        .tip-icon {
            font-size: 1.2rem;
        }

        .tip-content {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .warning-box {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid rgba(245, 158, 11, 0.3);
            border-radius: 8px;
            padding: 16px;
            display: flex;
            gap: 12px;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 30px;
            color: var(--text-muted);
            border-top: 1px solid var(--border-color);
            margin-top: 40px;
        }

        .footer a {
            color: var(--neon-cyan);
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .header {
                padding: 16px 20px;
                flex-direction: column;
                gap: 16px;
            }

            .main-content {
                padding: 20px;
            }

            .sensor-grid {
                grid-template-columns: 1fr;
            }

            .modal {
                margin: 10px;
                max-height: calc(100vh - 20px);
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <header class="header">
            <h1>{{ t.title }}</h1>
            <div class="header-controls">
                <div class="lang-toggle">
                    <button class="lang-btn" :class="{ active: lang === 'de' }" @click="lang = 'de'">DE</button>
                    <button class="lang-btn" :class="{ active: lang === 'en' }" @click="lang = 'en'">EN</button>
                </div>
                <a href="/api/sfml_stats/dashboard" class="back-btn">
                    <span>&#8592;</span>
                    <span>{{ t.backToDashboard }}</span>
                </a>
            </div>
        </header>

        <main class="main-content">
            <div class="intro">
                <h2>{{ t.introTitle }}</h2>
                <p>{{ t.introText }}</p>
            </div>

            <!-- Energy Flow Sensors -->
            <section class="category">
                <div class="category-header">
                    <span class="category-icon">&#9889;</span>
                    <h2 class="category-title solar">{{ t.categories.energyFlow }}</h2>
                </div>
                <div class="sensor-grid">
                    <div v-for="sensor in energyFlowSensors" :key="sensor.key"
                         class="sensor-card solar" @click="openModal(sensor)">
                        <span class="sensor-required" :class="sensor.required ? 'required' : 'optional'">
                            {{ sensor.required ? t.required : t.optional }}
                        </span>
                        <div class="sensor-name">{{ sensor.icon }} {{ sensor.name[lang] }}</div>
                        <div class="sensor-key">{{ sensor.key }}</div>
                        <div class="sensor-desc">{{ sensor.shortDesc[lang] }}</div>
                    </div>
                </div>
            </section>

            <!-- Panel Sensors -->
            <section class="category">
                <div class="category-header">
                    <span class="category-icon">&#9728;</span>
                    <h2 class="category-title solar">{{ t.categories.panels }}</h2>
                </div>
                <div class="sensor-grid">
                    <div v-for="sensor in panelSensors" :key="sensor.key"
                         class="sensor-card solar" @click="openModal(sensor)">
                        <span class="sensor-required optional">{{ t.optional }}</span>
                        <div class="sensor-name">{{ sensor.icon }} {{ sensor.name[lang] }}</div>
                        <div class="sensor-key">{{ sensor.key }}</div>
                        <div class="sensor-desc">{{ sensor.shortDesc[lang] }}</div>
                    </div>
                </div>
            </section>

            <!-- Battery Sensors -->
            <section class="category">
                <div class="category-header">
                    <span class="category-icon">&#128267;</span>
                    <h2 class="category-title battery">{{ t.categories.battery }}</h2>
                </div>
                <div class="sensor-grid">
                    <div v-for="sensor in batterySensors" :key="sensor.key"
                         class="sensor-card battery" @click="openModal(sensor)">
                        <span class="sensor-required" :class="sensor.required ? 'required' : 'optional'">
                            {{ sensor.required ? t.required : t.optional }}
                        </span>
                        <div class="sensor-name">{{ sensor.icon }} {{ sensor.name[lang] }}</div>
                        <div class="sensor-key">{{ sensor.key }}</div>
                        <div class="sensor-desc">{{ sensor.shortDesc[lang] }}</div>
                    </div>
                </div>
            </section>

            <!-- Grid Sensors -->
            <section class="category">
                <div class="category-header">
                    <span class="category-icon">&#9881;</span>
                    <h2 class="category-title grid">{{ t.categories.grid }}</h2>
                </div>
                <div class="sensor-grid">
                    <div v-for="sensor in gridSensors" :key="sensor.key"
                         class="sensor-card grid" @click="openModal(sensor)">
                        <span class="sensor-required" :class="sensor.required ? 'required' : 'optional'">
                            {{ sensor.required ? t.required : t.optional }}
                        </span>
                        <div class="sensor-name">{{ sensor.icon }} {{ sensor.name[lang] }}</div>
                        <div class="sensor-key">{{ sensor.key }}</div>
                        <div class="sensor-desc">{{ sensor.shortDesc[lang] }}</div>
                    </div>
                </div>
            </section>

            <!-- House Sensors -->
            <section class="category">
                <div class="category-header">
                    <span class="category-icon">&#127968;</span>
                    <h2 class="category-title house">{{ t.categories.house }}</h2>
                </div>
                <div class="sensor-grid">
                    <div v-for="sensor in houseSensors" :key="sensor.key"
                         class="sensor-card house" @click="openModal(sensor)">
                        <span class="sensor-required" :class="sensor.required ? 'required' : 'optional'">
                            {{ sensor.required ? t.required : t.optional }}
                        </span>
                        <div class="sensor-name">{{ sensor.icon }} {{ sensor.name[lang] }}</div>
                        <div class="sensor-key">{{ sensor.key }}</div>
                        <div class="sensor-desc">{{ sensor.shortDesc[lang] }}</div>
                    </div>
                </div>
            </section>

            <!-- Consumer Sensors -->
            <section class="category">
                <div class="category-header">
                    <span class="category-icon">&#128268;</span>
                    <h2 class="category-title consumer">{{ t.categories.consumers }}</h2>
                </div>
                <div class="sensor-grid">
                    <div v-for="sensor in consumerSensors" :key="sensor.key"
                         class="sensor-card consumer" @click="openModal(sensor)">
                        <span class="sensor-required optional">{{ t.optional }}</span>
                        <div class="sensor-name">{{ sensor.icon }} {{ sensor.name[lang] }}</div>
                        <div class="sensor-key">{{ sensor.key }}</div>
                        <div class="sensor-desc">{{ sensor.shortDesc[lang] }}</div>
                    </div>
                </div>
            </section>

            <!-- Weather -->
            <section class="category">
                <div class="category-header">
                    <span class="category-icon">&#127780;</span>
                    <h2 class="category-title weather">{{ t.categories.weather }}</h2>
                </div>
                <div class="sensor-grid">
                    <div v-for="sensor in weatherSensors" :key="sensor.key"
                         class="sensor-card house" @click="openModal(sensor)">
                        <span class="sensor-required optional">{{ t.optional }}</span>
                        <div class="sensor-name">{{ sensor.icon }} {{ sensor.name[lang] }}</div>
                        <div class="sensor-key">{{ sensor.key }}</div>
                        <div class="sensor-desc">{{ sensor.shortDesc[lang] }}</div>
                    </div>
                </div>
            </section>

            <!-- Billing -->
            <section class="category">
                <div class="category-header">
                    <span class="category-icon">&#128176;</span>
                    <h2 class="category-title billing">{{ t.categories.billing }}</h2>
                </div>
                <div class="sensor-grid">
                    <div v-for="sensor in billingSensors" :key="sensor.key"
                         class="sensor-card grid" @click="openModal(sensor)">
                        <span class="sensor-required optional">{{ t.optional }}</span>
                        <div class="sensor-name">{{ sensor.icon }} {{ sensor.name[lang] }}</div>
                        <div class="sensor-key">{{ sensor.key }}</div>
                        <div class="sensor-desc">{{ sensor.shortDesc[lang] }}</div>
                    </div>
                </div>
            </section>

            <!-- Forecast -->
            <section class="category">
                <div class="category-header">
                    <span class="category-icon">&#128200;</span>
                    <h2 class="category-title forecast">{{ t.categories.forecast }}</h2>
                </div>
                <div class="sensor-grid">
                    <div v-for="sensor in forecastSensors" :key="sensor.key"
                         class="sensor-card grid" @click="openModal(sensor)">
                        <span class="sensor-required optional">{{ t.optional }}</span>
                        <div class="sensor-name">{{ sensor.icon }} {{ sensor.name[lang] }}</div>
                        <div class="sensor-key">{{ sensor.key }}</div>
                        <div class="sensor-desc">{{ sensor.shortDesc[lang] }}</div>
                    </div>
                </div>
            </section>
        </main>

        <footer class="footer">
            <p>SFML Stats &copy; 2025 Zara-Toorox | <a href="/api/sfml_stats/dashboard">{{ t.backToDashboard }}</a></p>
        </footer>

        <!-- Modal -->
        <div v-if="selectedSensor" class="modal-overlay" @click.self="closeModal">
            <div class="modal">
                <div class="modal-header">
                    <div>
                        <h3>{{ selectedSensor.icon }} {{ selectedSensor.name[lang] }}</h3>
                        <div class="sensor-key">{{ selectedSensor.key }}</div>
                    </div>
                    <button class="modal-close" @click="closeModal">&times;</button>
                </div>
                <div class="modal-body">
                    <!-- Purpose -->
                    <div class="modal-section">
                        <h4>&#128161; {{ t.modal.purpose }}</h4>
                        <p>{{ selectedSensor.description[lang] }}</p>
                    </div>

                    <!-- Technical Details -->
                    <div class="modal-section">
                        <h4>&#9881; {{ t.modal.technical }}</h4>
                        <div class="info-box">
                            <div class="info-row">
                                <span class="info-label">{{ t.modal.unit }}</span>
                                <span class="info-value">{{ selectedSensor.unit }}</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">{{ t.modal.expectedRange }}</span>
                                <span class="info-value">{{ selectedSensor.range[lang] }}</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">{{ t.modal.updateFrequency }}</span>
                                <span class="info-value">{{ selectedSensor.updateFreq[lang] }}</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">{{ t.modal.status }}</span>
                                <span class="info-value" :style="{ color: selectedSensor.required ? '#ef4444' : '#22c55e' }">
                                    {{ selectedSensor.required ? t.required : t.optional }}
                                </span>
                            </div>
                        </div>
                    </div>

                    <!-- Example -->
                    <div class="modal-section">
                        <h4>&#128221; {{ t.modal.example }}</h4>
                        <div class="code-block">
                            <span class="comment"># {{ t.modal.exampleComment[lang] }}</span><br>
                            <span class="entity">{{ selectedSensor.example }}</span>
                        </div>
                    </div>

                    <!-- Common Integrations -->
                    <div class="modal-section" v-if="selectedSensor.integrations">
                        <h4>&#128279; {{ t.modal.integrations }}</h4>
                        <p style="color: var(--text-secondary);">{{ selectedSensor.integrations[lang] }}</p>
                    </div>

                    <!-- Tips -->
                    <div class="modal-section" v-if="selectedSensor.tip">
                        <div class="tip-box">
                            <span class="tip-icon">&#128161;</span>
                            <div class="tip-content">{{ selectedSensor.tip[lang] }}</div>
                        </div>
                    </div>

                    <!-- Warning -->
                    <div class="modal-section" v-if="selectedSensor.warning">
                        <div class="warning-box">
                            <span class="tip-icon">&#9888;</span>
                            <div class="tip-content" style="color: #f59e0b;">{{ selectedSensor.warning[lang] }}</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const { createApp, ref, computed } = Vue;

        createApp({
            setup() {
                const lang = ref('de');
                const selectedSensor = ref(null);

                // Translations
                const translations = {
                    de: {
                        title: 'SFML Stats - Sensor Konfiguration',
                        backToDashboard: 'Zum Dashboard',
                        introTitle: 'Sensor Konfigurations-Hilfe',
                        introText: 'Hier findest du eine detaillierte Anleitung zu allen Sensoren, die SFML Stats verwenden kann. Klicke auf einen Sensor, um mehr Informationen zu erhalten.',
                        required: 'Erforderlich',
                        optional: 'Optional',
                        categories: {
                            energyFlow: 'Energiefluss-Sensoren',
                            panels: 'Solar-Panel Sensoren',
                            battery: 'Batterie-Sensoren',
                            grid: 'Netz-Sensoren',
                            house: 'Haushalts-Sensoren',
                            consumers: 'Verbraucher-Sensoren',
                            weather: 'Wetter-Konfiguration',
                            billing: 'Abrechnungs-Einstellungen',
                            forecast: 'Prognose-Vergleich'
                        },
                        modal: {
                            purpose: 'Zweck',
                            technical: 'Technische Details',
                            unit: 'Einheit',
                            expectedRange: 'Erwarteter Bereich',
                            updateFrequency: 'Aktualisierung',
                            status: 'Status',
                            example: 'Beispiel Entity',
                            exampleComment: { de: 'Typische Entity-ID aus Home Assistant', en: 'Typical entity ID from Home Assistant' },
                            integrations: 'Kompatible Integrationen',
                            tip: 'Tipp',
                            warning: 'Warnung'
                        }
                    },
                    en: {
                        title: 'SFML Stats - Sensor Configuration',
                        backToDashboard: 'Back to Dashboard',
                        introTitle: 'Sensor Configuration Help',
                        introText: 'Here you will find detailed instructions for all sensors that SFML Stats can use. Click on a sensor to get more information.',
                        required: 'Required',
                        optional: 'Optional',
                        categories: {
                            energyFlow: 'Energy Flow Sensors',
                            panels: 'Solar Panel Sensors',
                            battery: 'Battery Sensors',
                            grid: 'Grid Sensors',
                            house: 'Household Sensors',
                            consumers: 'Consumer Sensors',
                            weather: 'Weather Configuration',
                            billing: 'Billing Settings',
                            forecast: 'Forecast Comparison'
                        },
                        modal: {
                            purpose: 'Purpose',
                            technical: 'Technical Details',
                            unit: 'Unit',
                            expectedRange: 'Expected Range',
                            updateFrequency: 'Update Frequency',
                            status: 'Status',
                            example: 'Example Entity',
                            exampleComment: { de: 'Typische Entity-ID aus Home Assistant', en: 'Typical entity ID from Home Assistant' },
                            integrations: 'Compatible Integrations',
                            tip: 'Tip',
                            warning: 'Warning'
                        }
                    }
                };

                const t = computed(() => translations[lang.value]);

                // ============================================================
                // SENSOR DEFINITIONS
                // ============================================================

                const energyFlowSensors = [
                    {
                        key: 'sensor_solar_power',
                        icon: '‚òÄÔ∏è',
                        name: { de: 'Solar Gesamtleistung', en: 'Total Solar Power' },
                        shortDesc: { de: 'Aktuelle PV-Gesamtleistung in Watt', en: 'Current total PV power in Watts' },
                        description: {
                            de: 'Dieser Sensor zeigt die aktuelle Gesamtleistung aller Solarmodule in Watt an. Er wird f√ºr das Energiefluss-Diagramm, Statistiken und die Prognose-Genauigkeit verwendet.',
                            en: 'This sensor shows the current total power of all solar modules in Watts. It is used for the energy flow diagram, statistics, and forecast accuracy.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - max. Anlagenleistung (z.B. 10000 W)', en: '0 - max. system power (e.g. 10000 W)' },
                        updateFreq: { de: 'Echtzeit (empfohlen: alle 10-30 Sekunden)', en: 'Real-time (recommended: every 10-30 seconds)' },
                        example: 'sensor.solar_power',
                        integrations: { de: 'SMA, Fronius, SolarEdge, Huawei, Enphase, Sungrow', en: 'SMA, Fronius, SolarEdge, Huawei, Enphase, Sungrow' },
                        tip: { de: 'Bei mehreren Wechselrichtern solltest du einen Template-Sensor erstellen, der alle Leistungen addiert.', en: 'With multiple inverters, you should create a template sensor that sums all powers.' },
                        required: true
                    },
                    {
                        key: 'sensor_solar_to_house',
                        icon: 'üè†',
                        name: { de: 'Solar zu Haus', en: 'Solar to House' },
                        shortDesc: { de: 'Direkter Solarverbrauch im Haus', en: 'Direct solar consumption in house' },
                        description: {
                            de: 'Zeigt an, wie viel Solarstrom direkt im Haus verbraucht wird (ohne Umweg √ºber Batterie oder Netz). Wichtig f√ºr die Eigenverbrauchsquote.',
                            en: 'Shows how much solar power is directly consumed in the house (without battery or grid). Important for self-consumption rate.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - Solarleistung', en: '0 - Solar power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.solar_to_house_power',
                        integrations: { de: 'Meist von Hybrid-Wechselrichtern bereitgestellt', en: 'Usually provided by hybrid inverters' },
                        tip: { de: 'Falls nicht verf√ºgbar: Template mit Solar - (Solar zu Batterie) - (Einspeisung)', en: 'If not available: Template with Solar - (Solar to Battery) - (Feed-in)' },
                        required: false
                    },
                    {
                        key: 'sensor_solar_to_battery',
                        icon: 'üîã',
                        name: { de: 'Solar zu Batterie', en: 'Solar to Battery' },
                        shortDesc: { de: 'Solarstrom der die Batterie l√§dt', en: 'Solar power charging the battery' },
                        description: {
                            de: 'Zeigt die Leistung, mit der die Batterie aus der Solaranlage geladen wird. Wird im Energiefluss-Diagramm als gelbe Linie zur Batterie dargestellt.',
                            en: 'Shows the power at which the battery is charged from the solar system. Displayed as a yellow line to the battery in the energy flow diagram.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - max. Ladeleistung', en: '0 - max. charging power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.battery_charge_power_from_solar',
                        tip: { de: 'Bei manchen Systemen muss dieser Wert aus der Batterie-Ladeleistung und dem Netzstatus berechnet werden.', en: 'In some systems, this value must be calculated from battery charging power and grid status.' },
                        required: false
                    },
                    {
                        key: 'sensor_solar_yield_daily',
                        icon: 'üìä',
                        name: { de: 'Tagesertrag Solar', en: 'Daily Solar Yield' },
                        shortDesc: { de: 'Gesamte Solarproduktion heute', en: 'Total solar production today' },
                        description: {
                            de: 'Zeigt die gesamte Solarproduktion des aktuellen Tages in kWh. Wird f√ºr die Tagesstatistik, Prognose-Vergleich und Wochen-/Monatsberichte verwendet.',
                            en: 'Shows the total solar production of the current day in kWh. Used for daily statistics, forecast comparison and weekly/monthly reports.'
                        },
                        unit: 'kWh',
                        range: { de: '0 - je nach Anlage (z.B. 0-50 kWh)', en: '0 - depending on system (e.g. 0-50 kWh)' },
                        updateFreq: { de: 'Alle paar Minuten', en: 'Every few minutes' },
                        example: 'sensor.solar_yield_today',
                        integrations: { de: 'Die meisten Wechselrichter-Integrationen bieten diesen Sensor', en: 'Most inverter integrations provide this sensor' },
                        tip: { de: 'Wenn nicht verf√ºgbar, kann der Recorder mit Riemann-Summe genutzt werden.', en: 'If not available, the recorder with Riemann sum can be used.' },
                        required: true
                    },
                    {
                        key: 'sensor_solar_yield_total_kwh',
                        icon: 'üìà',
                        name: { de: 'Gesamtertrag Solar', en: 'Total Solar Yield' },
                        shortDesc: { de: 'Gesamte Solarproduktion seit Installation', en: 'Total solar production since installation' },
                        description: {
                            de: 'Zeigt die gesamte Solarproduktion seit Installation in kWh. Wird f√ºr Langzeit-Statistiken und den Energiez√§hler verwendet.',
                            en: 'Shows total solar production since installation in kWh. Used for long-term statistics and energy counter.'
                        },
                        unit: 'kWh',
                        range: { de: '0 - unbegrenzt (steigt stetig)', en: '0 - unlimited (continuously rising)' },
                        updateFreq: { de: 'Alle paar Minuten', en: 'Every few minutes' },
                        example: 'sensor.solar_total_yield',
                        required: false
                    }
                ];

                const batterySensors = [
                    {
                        key: 'sensor_battery_soc',
                        icon: 'üîã',
                        name: { de: 'Batterie Ladestand', en: 'Battery State of Charge' },
                        shortDesc: { de: 'Aktueller Ladezustand in Prozent', en: 'Current charge level in percent' },
                        description: {
                            de: 'Zeigt den aktuellen Ladezustand (State of Charge) der Batterie in Prozent. Wird prominent im Energiefluss-Diagramm als Bogen um den Reaktor-Kern angezeigt.',
                            en: 'Shows the current State of Charge of the battery in percent. Displayed prominently in the energy flow diagram as an arc around the reactor core.'
                        },
                        unit: '% (Prozent)',
                        range: { de: '0 - 100%', en: '0 - 100%' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.battery_state_of_charge',
                        integrations: { de: 'Huawei, BYD, Tesla Powerwall, LG Chem, Sonnen', en: 'Huawei, BYD, Tesla Powerwall, LG Chem, Sonnen' },
                        required: true
                    },
                    {
                        key: 'sensor_battery_power',
                        icon: '‚ö°',
                        name: { de: 'Batterie Leistung', en: 'Battery Power' },
                        shortDesc: { de: 'Aktuelle Lade-/Entladeleistung', en: 'Current charge/discharge power' },
                        description: {
                            de: 'Zeigt die aktuelle Leistung der Batterie. Positive Werte = Entladen, Negative Werte = Laden (je nach System auch umgekehrt). Bestimmt die Farbe des Reaktor-Kerns.',
                            en: 'Shows the current battery power. Positive values = discharging, Negative values = charging (may be reversed depending on system). Determines the reactor core color.'
                        },
                        unit: 'W (Watt)',
                        range: { de: 'z.B. -5000 bis +5000 W', en: 'e.g. -5000 to +5000 W' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.battery_power',
                        tip: { de: 'Pr√ºfe, ob positive Werte Laden oder Entladen bedeuten - das variiert je nach Hersteller!', en: 'Check if positive values mean charging or discharging - this varies by manufacturer!' },
                        required: true
                    },
                    {
                        key: 'sensor_battery_to_house',
                        icon: 'üè†',
                        name: { de: 'Batterie zu Haus', en: 'Battery to House' },
                        shortDesc: { de: 'Batterie-Entladung zum Hausverbrauch', en: 'Battery discharge to house consumption' },
                        description: {
                            de: 'Zeigt, wie viel Leistung von der Batterie ins Haus flie√üt. Wird als gr√ºne Linie im Energiefluss-Diagramm dargestellt.',
                            en: 'Shows how much power flows from the battery to the house. Displayed as a green line in the energy flow diagram.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - max. Entladeleistung', en: '0 - max. discharge power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.battery_discharge_power',
                        required: false
                    },
                    {
                        key: 'sensor_battery_to_grid',
                        icon: 'üîå',
                        name: { de: 'Batterie zu Netz', en: 'Battery to Grid' },
                        shortDesc: { de: 'Batterie-Einspeisung ins Netz', en: 'Battery feed-in to grid' },
                        description: {
                            de: 'Zeigt, ob und wie viel Strom aus der Batterie ins Netz eingespeist wird. Bei den meisten Systemen ist dies 0 oder nicht konfiguriert.',
                            en: 'Shows if and how much power from the battery is fed into the grid. For most systems this is 0 or not configured.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - max. Entladeleistung', en: '0 - max. discharge power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.battery_to_grid_power',
                        tip: { de: 'Nur relevant wenn dein System Batterie-Einspeisung unterst√ºtzt (z.B. f√ºr Arbitrage).', en: 'Only relevant if your system supports battery feed-in (e.g. for arbitrage).' },
                        required: false
                    },
                    {
                        key: 'sensor_battery_charge_solar_daily',
                        icon: '‚òÄÔ∏è',
                        name: { de: 'Batterie-Ladung Solar (Heute)', en: 'Battery Charge from Solar (Today)' },
                        shortDesc: { de: 'Heute aus Solar geladene kWh', en: 'kWh charged from solar today' },
                        description: {
                            de: 'Zeigt, wie viel Energie heute aus der Solaranlage in die Batterie geladen wurde. Wichtig f√ºr die Eigenverbrauchsoptimierung.',
                            en: 'Shows how much energy was charged into the battery from solar today. Important for self-consumption optimization.'
                        },
                        unit: 'kWh',
                        range: { de: '0 - Batteriekapazit√§t', en: '0 - battery capacity' },
                        updateFreq: { de: 'Alle paar Minuten', en: 'Every few minutes' },
                        example: 'sensor.battery_charge_from_solar_today',
                        required: false
                    },
                    {
                        key: 'sensor_battery_charge_grid_daily',
                        icon: 'üîå',
                        name: { de: 'Batterie-Ladung Netz (Heute)', en: 'Battery Charge from Grid (Today)' },
                        shortDesc: { de: 'Heute aus Netz geladene kWh', en: 'kWh charged from grid today' },
                        description: {
                            de: 'Zeigt, wie viel Energie heute aus dem Netz in die Batterie geladen wurde. Relevant bei dynamischen Tarifen (g√ºnstiges Laden).',
                            en: 'Shows how much energy was charged into the battery from the grid today. Relevant for dynamic tariffs (cheap charging).'
                        },
                        unit: 'kWh',
                        range: { de: '0 - Batteriekapazit√§t', en: '0 - battery capacity' },
                        updateFreq: { de: 'Alle paar Minuten', en: 'Every few minutes' },
                        example: 'sensor.battery_charge_from_grid_today',
                        required: false
                    }
                ];

                const gridSensors = [
                    {
                        key: 'sensor_grid_to_house',
                        icon: 'üè†',
                        name: { de: 'Netzbezug zu Haus', en: 'Grid Import to House' },
                        shortDesc: { de: 'Strom vom Netz ins Haus', en: 'Power from grid to house' },
                        description: {
                            de: 'Zeigt, wie viel Strom aktuell vom Netz bezogen wird. Wird als pinke Linie im Energiefluss-Diagramm dargestellt. Der Cyber Power Tower leuchtet pink bei Import.',
                            en: 'Shows how much power is currently drawn from the grid. Displayed as a pink line in the energy flow diagram. The Cyber Power Tower glows pink during import.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - Hausanschlussleistung', en: '0 - house connection power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.grid_import_power',
                        integrations: { de: 'Smartmeter, Wechselrichter mit Netz√ºberwachung', en: 'Smart meter, inverter with grid monitoring' },
                        required: true
                    },
                    {
                        key: 'sensor_grid_to_battery',
                        icon: 'üîã',
                        name: { de: 'Netz zu Batterie', en: 'Grid to Battery' },
                        shortDesc: { de: 'Netzstrom l√§dt die Batterie', en: 'Grid power charges battery' },
                        description: {
                            de: 'Zeigt, wie viel Netzstrom in die Batterie flie√üt. Relevant f√ºr Systeme mit Netzladung (z.B. g√ºnstiger Nachtstrom oder dynamische Tarife).',
                            en: 'Shows how much grid power flows into the battery. Relevant for systems with grid charging (e.g. cheap night rates or dynamic tariffs).'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - max. Ladeleistung', en: '0 - max. charging power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.grid_to_battery_power',
                        required: false
                    },
                    {
                        key: 'sensor_house_to_grid',
                        icon: 'üì§',
                        name: { de: 'Einspeisung ins Netz', en: 'Feed-in to Grid' },
                        shortDesc: { de: '√úberschuss wird eingespeist', en: 'Surplus is fed into grid' },
                        description: {
                            de: 'Zeigt die aktuelle Einspeiseleistung ins Netz. Wird als cyan-farbene Linie dargestellt und der Cyber Power Tower leuchtet cyan.',
                            en: 'Shows the current feed-in power to the grid. Displayed as a cyan-colored line and the Cyber Power Tower glows cyan.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - max. Einspeiseleistung', en: '0 - max. feed-in power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.grid_export_power',
                        required: true
                    },
                    {
                        key: 'sensor_grid_import_daily',
                        icon: 'üìä',
                        name: { de: 'Netzbezug Heute', en: 'Grid Import Today' },
                        shortDesc: { de: 'Heute bezogene kWh vom Netz', en: 'kWh imported from grid today' },
                        description: {
                            de: 'Zeigt, wie viel Energie heute vom Netz bezogen wurde. Wichtig f√ºr die Kostenberechnung und Autarkie-Quote.',
                            en: 'Shows how much energy was imported from the grid today. Important for cost calculation and self-sufficiency rate.'
                        },
                        unit: 'kWh',
                        range: { de: '0 - je nach Verbrauch', en: '0 - depending on consumption' },
                        updateFreq: { de: 'Alle paar Minuten', en: 'Every few minutes' },
                        example: 'sensor.grid_import_today',
                        required: false
                    },
                    {
                        key: 'sensor_grid_import_yearly',
                        icon: 'üìà',
                        name: { de: 'Netzbezug Jahr', en: 'Grid Import Year' },
                        shortDesc: { de: 'Dieses Jahr bezogene kWh', en: 'kWh imported this year' },
                        description: {
                            de: 'Zeigt den gesamten Netzbezug im aktuellen Abrechnungsjahr. Wird f√ºr die Jahresbilanz und Kostenprognose verwendet.',
                            en: 'Shows total grid import in the current billing year. Used for annual balance and cost forecast.'
                        },
                        unit: 'kWh',
                        range: { de: '0 - je nach Verbrauch', en: '0 - depending on consumption' },
                        updateFreq: { de: 'St√ºndlich', en: 'Hourly' },
                        example: 'sensor.grid_import_year',
                        required: false
                    },
                    {
                        key: 'sensor_smartmeter_import_kwh',
                        icon: 'üìü',
                        name: { de: 'Smartmeter Bezug (kWh)', en: 'Smart Meter Import (kWh)' },
                        shortDesc: { de: 'Offizieller Z√§hlerstand Bezug', en: 'Official meter reading import' },
                        description: {
                            de: 'Der offizielle Z√§hlerstand des Smartmeters f√ºr Netzbezug. Wird f√ºr die pr√§zise Jahresabrechnung verwendet.',
                            en: 'The official smart meter reading for grid import. Used for precise annual billing.'
                        },
                        unit: 'kWh',
                        range: { de: 'Steigend (Z√§hlerstand)', en: 'Rising (meter reading)' },
                        updateFreq: { de: 'Je nach Smartmeter', en: 'Depends on smart meter' },
                        example: 'sensor.electricity_meter_import',
                        required: false
                    },
                    {
                        key: 'sensor_smartmeter_export_kwh',
                        icon: 'üìü',
                        name: { de: 'Smartmeter Export (kWh)', en: 'Smart Meter Export (kWh)' },
                        shortDesc: { de: 'Offizieller Z√§hlerstand Einspeisung', en: 'Official meter reading export' },
                        description: {
                            de: 'Der offizielle Z√§hlerstand des Smartmeters f√ºr Einspeisung. Wird f√ºr die pr√§zise Verg√ºtungsberechnung verwendet.',
                            en: 'The official smart meter reading for feed-in. Used for precise feed-in tariff calculation.'
                        },
                        unit: 'kWh',
                        range: { de: 'Steigend (Z√§hlerstand)', en: 'Rising (meter reading)' },
                        updateFreq: { de: 'Je nach Smartmeter', en: 'Depends on smart meter' },
                        example: 'sensor.electricity_meter_export',
                        required: false
                    },
                    {
                        key: 'sensor_smartmeter_import',
                        icon: '‚ö°',
                        name: { de: 'Smartmeter Bezug (W)', en: 'Smart Meter Import (W)' },
                        shortDesc: { de: 'Aktuelle Bezugsleistung vom Smartmeter', en: 'Current import power from smart meter' },
                        description: {
                            de: 'Die aktuelle Bezugsleistung direkt vom Smartmeter in Watt. Genauer als Wechselrichter-Messung.',
                            en: 'The current import power directly from the smart meter in Watts. More accurate than inverter measurement.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - Hausanschlussleistung', en: '0 - house connection power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.smartmeter_power_import',
                        required: false
                    },
                    {
                        key: 'sensor_smartmeter_export',
                        icon: '‚ö°',
                        name: { de: 'Smartmeter Export (W)', en: 'Smart Meter Export (W)' },
                        shortDesc: { de: 'Aktuelle Einspeiseleistung vom Smartmeter', en: 'Current export power from smart meter' },
                        description: {
                            de: 'Die aktuelle Einspeiseleistung direkt vom Smartmeter in Watt. Genauer als Wechselrichter-Messung.',
                            en: 'The current export power directly from the smart meter in Watts. More accurate than inverter measurement.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - max. Einspeiseleistung', en: '0 - max. feed-in power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.smartmeter_power_export',
                        required: false
                    },
                    {
                        key: 'sensor_price_total',
                        icon: 'üí∞',
                        name: { de: 'Aktueller Strompreis', en: 'Current Electricity Price' },
                        shortDesc: { de: 'Dynamischer Strompreis in ct/kWh', en: 'Dynamic electricity price in ct/kWh' },
                        description: {
                            de: 'Der aktuelle Strompreis inklusive aller Abgaben und Steuern. Wird f√ºr die Kostenberechnung bei dynamischen Tarifen verwendet.',
                            en: 'The current electricity price including all fees and taxes. Used for cost calculation with dynamic tariffs.'
                        },
                        unit: 'ct/kWh',
                        range: { de: 'Je nach Tarif (z.B. -5 bis 80 ct)', en: 'Depending on tariff (e.g. -5 to 80 ct)' },
                        updateFreq: { de: 'St√ºndlich', en: 'Hourly' },
                        example: 'sensor.tibber_prices_total',
                        integrations: { de: 'Tibber, aWATTar, ENTSO-E, Octopus Energy', en: 'Tibber, aWATTar, ENTSO-E, Octopus Energy' },
                        tip: { de: 'Bei festem Tarif kann ein Template-Sensor mit konstantem Wert erstellt werden.', en: 'With a fixed tariff, a template sensor with a constant value can be created.' },
                        required: false
                    }
                ];

                const houseSensors = [
                    {
                        key: 'sensor_home_consumption',
                        icon: 'üè†',
                        name: { de: 'Hausverbrauch', en: 'Home Consumption' },
                        shortDesc: { de: 'Aktueller Gesamtverbrauch in Watt', en: 'Current total consumption in Watts' },
                        description: {
                            de: 'Zeigt den aktuellen Gesamtverbrauch des Haushalts. Zentral f√ºr alle Berechnungen wie Eigenverbrauch, Autarkie und Energiefluss.',
                            en: 'Shows the current total consumption of the household. Central for all calculations like self-consumption, self-sufficiency and energy flow.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '100 - 20000+ W (je nach Haushalt)', en: '100 - 20000+ W (depending on household)' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.home_consumption',
                        integrations: { de: 'Wechselrichter, Smartmeter, eigene Berechnung', en: 'Inverter, smart meter, own calculation' },
                        tip: { de: 'Kann berechnet werden als: Solar + Netzbezug + Batterie-Entladung - Einspeisung - Batterie-Ladung', en: 'Can be calculated as: Solar + Grid Import + Battery Discharge - Feed-in - Battery Charging' },
                        required: true
                    }
                ];

                const panelSensors = [
                    {
                        key: 'sensor_panel1_power',
                        icon: '‚òÄÔ∏è',
                        name: { de: 'Panel-Gruppe 1 Leistung', en: 'Panel Group 1 Power' },
                        shortDesc: { de: 'Aktuelle Leistung der ersten Panel-Gruppe', en: 'Current power of first panel group' },
                        description: {
                            de: 'Zeigt die aktuelle Leistung der ersten Panel-Gruppe (z.B. S√ºdausrichtung). Wird in der Panel-√úbersicht und f√ºr detaillierte Analysen verwendet.',
                            en: 'Shows the current power of the first panel group (e.g. south-facing). Used in the panel overview and for detailed analyses.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - Gruppenleistung', en: '0 - group power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.pv_string_1_power',
                        tip: { de: 'Bei Micro-Invertern kann jedes Panel einzeln √ºberwacht werden.', en: 'With micro-inverters, each panel can be monitored individually.' },
                        required: false
                    },
                    {
                        key: 'sensor_panel1_max_today',
                        icon: 'üìä',
                        name: { de: 'Panel-Gruppe 1 Maximum Heute', en: 'Panel Group 1 Maximum Today' },
                        shortDesc: { de: 'H√∂chste Leistung heute', en: 'Highest power today' },
                        description: {
                            de: 'Zeigt die bisher h√∂chste Leistung der Panel-Gruppe heute. N√ºtzlich um die Performance zu √ºberwachen.',
                            en: 'Shows the highest power of the panel group today so far. Useful for monitoring performance.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - Gruppenleistung', en: '0 - group power' },
                        updateFreq: { de: 'Bei neuem Maximum', en: 'On new maximum' },
                        example: 'sensor.pv_string_1_max_today',
                        required: false
                    },
                    {
                        key: 'sensor_panel2_power',
                        icon: '‚òÄÔ∏è',
                        name: { de: 'Panel-Gruppe 2 Leistung', en: 'Panel Group 2 Power' },
                        shortDesc: { de: 'Aktuelle Leistung der zweiten Panel-Gruppe', en: 'Current power of second panel group' },
                        description: {
                            de: 'Zeigt die aktuelle Leistung der zweiten Panel-Gruppe (z.B. Ost-/Westausrichtung).',
                            en: 'Shows the current power of the second panel group (e.g. east/west facing).'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - Gruppenleistung', en: '0 - group power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.pv_string_2_power',
                        required: false
                    },
                    {
                        key: 'sensor_panel2_max_today',
                        icon: 'üìä',
                        name: { de: 'Panel-Gruppe 2 Maximum Heute', en: 'Panel Group 2 Maximum Today' },
                        shortDesc: { de: 'H√∂chste Leistung heute', en: 'Highest power today' },
                        description: {
                            de: 'Zeigt die bisher h√∂chste Leistung der zweiten Panel-Gruppe heute.',
                            en: 'Shows the highest power of the second panel group today so far.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - Gruppenleistung', en: '0 - group power' },
                        updateFreq: { de: 'Bei neuem Maximum', en: 'On new maximum' },
                        example: 'sensor.pv_string_2_max_today',
                        required: false
                    },
                    {
                        key: 'sensor_panel3_power',
                        icon: '‚òÄÔ∏è',
                        name: { de: 'Panel-Gruppe 3 Leistung', en: 'Panel Group 3 Power' },
                        shortDesc: { de: 'Aktuelle Leistung der dritten Panel-Gruppe', en: 'Current power of third panel group' },
                        description: {
                            de: 'Zeigt die aktuelle Leistung der dritten Panel-Gruppe.',
                            en: 'Shows the current power of the third panel group.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - Gruppenleistung', en: '0 - group power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.pv_string_3_power',
                        required: false
                    },
                    {
                        key: 'sensor_panel3_max_today',
                        icon: 'üìä',
                        name: { de: 'Panel-Gruppe 3 Maximum Heute', en: 'Panel Group 3 Maximum Today' },
                        shortDesc: { de: 'H√∂chste Leistung heute', en: 'Highest power today' },
                        description: {
                            de: 'Zeigt die bisher h√∂chste Leistung der dritten Panel-Gruppe heute.',
                            en: 'Shows the highest power of the third panel group today so far.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - Gruppenleistung', en: '0 - group power' },
                        updateFreq: { de: 'Bei neuem Maximum', en: 'On new maximum' },
                        example: 'sensor.pv_string_3_max_today',
                        required: false
                    },
                    {
                        key: 'sensor_panel4_power',
                        icon: '‚òÄÔ∏è',
                        name: { de: 'Panel-Gruppe 4 Leistung', en: 'Panel Group 4 Power' },
                        shortDesc: { de: 'Aktuelle Leistung der vierten Panel-Gruppe', en: 'Current power of fourth panel group' },
                        description: {
                            de: 'Zeigt die aktuelle Leistung der vierten Panel-Gruppe.',
                            en: 'Shows the current power of the fourth panel group.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - Gruppenleistung', en: '0 - group power' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.pv_string_4_power',
                        required: false
                    },
                    {
                        key: 'sensor_panel4_max_today',
                        icon: 'üìä',
                        name: { de: 'Panel-Gruppe 4 Maximum Heute', en: 'Panel Group 4 Maximum Today' },
                        shortDesc: { de: 'H√∂chste Leistung heute', en: 'Highest power today' },
                        description: {
                            de: 'Zeigt die bisher h√∂chste Leistung der vierten Panel-Gruppe heute.',
                            en: 'Shows the highest power of the fourth panel group today so far.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - Gruppenleistung', en: '0 - group power' },
                        updateFreq: { de: 'Bei neuem Maximum', en: 'On new maximum' },
                        example: 'sensor.pv_string_4_max_today',
                        required: false
                    }
                ];

                const consumerSensors = [
                    {
                        key: 'sensor_heatpump_power',
                        icon: 'üå°Ô∏è',
                        name: { de: 'W√§rmepumpe Leistung', en: 'Heat Pump Power' },
                        shortDesc: { de: 'Aktuelle Leistungsaufnahme der W√§rmepumpe', en: 'Current power consumption of heat pump' },
                        description: {
                            de: 'Zeigt die aktuelle elektrische Leistungsaufnahme der W√§rmepumpe. Wird im Verbraucher-Widget und f√ºr Statistiken verwendet.',
                            en: 'Shows the current electrical power consumption of the heat pump. Used in the consumer widget and for statistics.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - max. Leistung (z.B. 0-3000 W)', en: '0 - max. power (e.g. 0-3000 W)' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.heatpump_power',
                        integrations: { de: 'Vaillant, Viessmann, Daikin, Bosch, Nibe', en: 'Vaillant, Viessmann, Daikin, Bosch, Nibe' },
                        required: false
                    },
                    {
                        key: 'sensor_heatpump_daily',
                        icon: 'üìä',
                        name: { de: 'W√§rmepumpe Heute', en: 'Heat Pump Today' },
                        shortDesc: { de: 'Heute verbrauchte kWh', en: 'kWh consumed today' },
                        description: {
                            de: 'Zeigt den heutigen Stromverbrauch der W√§rmepumpe. Wichtig f√ºr die Verbrauchsanalyse.',
                            en: 'Shows todays electricity consumption of the heat pump. Important for consumption analysis.'
                        },
                        unit: 'kWh',
                        range: { de: '0 - je nach Nutzung', en: '0 - depending on usage' },
                        updateFreq: { de: 'Alle paar Minuten', en: 'Every few minutes' },
                        example: 'sensor.heatpump_energy_today',
                        required: false
                    },
                    {
                        key: 'sensor_heatpump_cop',
                        icon: 'üìà',
                        name: { de: 'W√§rmepumpe COP', en: 'Heat Pump COP' },
                        shortDesc: { de: 'Coefficient of Performance', en: 'Coefficient of Performance' },
                        description: {
                            de: 'Der aktuelle COP (Leistungszahl) der W√§rmepumpe. Zeigt das Verh√§ltnis von erzeugter W√§rme zu verbrauchtem Strom.',
                            en: 'The current COP of the heat pump. Shows the ratio of generated heat to consumed electricity.'
                        },
                        unit: 'Faktor (z.B. 3.5)',
                        range: { de: '1.0 - 6.0 (typisch 2.5-4.5)', en: '1.0 - 6.0 (typically 2.5-4.5)' },
                        updateFreq: { de: 'Je nach W√§rmepumpe', en: 'Depends on heat pump' },
                        example: 'sensor.heatpump_cop',
                        tip: { de: 'Falls nicht verf√ºgbar, wird ein Standard-COP von 3.5 verwendet.', en: 'If not available, a default COP of 3.5 is used.' },
                        required: false
                    },
                    {
                        key: 'sensor_heatingrod_power',
                        icon: 'üî•',
                        name: { de: 'Heizstab Leistung', en: 'Heating Rod Power' },
                        shortDesc: { de: 'Aktuelle Leistung des Heizstabs', en: 'Current power of heating rod' },
                        description: {
                            de: 'Zeigt die aktuelle Leistungsaufnahme des Heizstabs (z.B. f√ºr Warmwasser oder Pufferspeicher).',
                            en: 'Shows the current power consumption of the heating rod (e.g. for hot water or buffer storage).'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - max. Leistung (z.B. 0-6000 W)', en: '0 - max. power (e.g. 0-6000 W)' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.heatingrod_power',
                        required: false
                    },
                    {
                        key: 'sensor_heatingrod_daily',
                        icon: 'üìä',
                        name: { de: 'Heizstab Heute', en: 'Heating Rod Today' },
                        shortDesc: { de: 'Heute verbrauchte kWh', en: 'kWh consumed today' },
                        description: {
                            de: 'Zeigt den heutigen Stromverbrauch des Heizstabs.',
                            en: 'Shows todays electricity consumption of the heating rod.'
                        },
                        unit: 'kWh',
                        range: { de: '0 - je nach Nutzung', en: '0 - depending on usage' },
                        updateFreq: { de: 'Alle paar Minuten', en: 'Every few minutes' },
                        example: 'sensor.heatingrod_energy_today',
                        required: false
                    },
                    {
                        key: 'sensor_wallbox_power',
                        icon: 'üöó',
                        name: { de: 'Wallbox Leistung', en: 'Wallbox Power' },
                        shortDesc: { de: 'Aktuelle Ladeleistung der Wallbox', en: 'Current charging power of wallbox' },
                        description: {
                            de: 'Zeigt die aktuelle Ladeleistung der Wallbox / des E-Auto-Ladeger√§ts.',
                            en: 'Shows the current charging power of the wallbox / EV charger.'
                        },
                        unit: 'W (Watt)',
                        range: { de: '0 - max. Ladeleistung (z.B. 0-11000 W)', en: '0 - max. charging power (e.g. 0-11000 W)' },
                        updateFreq: { de: 'Echtzeit', en: 'Real-time' },
                        example: 'sensor.wallbox_power',
                        integrations: { de: 'go-e, Easee, OpenWB, Keba, ABL, Tesla Wall Connector', en: 'go-e, Easee, OpenWB, Keba, ABL, Tesla Wall Connector' },
                        required: false
                    },
                    {
                        key: 'sensor_wallbox_daily',
                        icon: 'üìä',
                        name: { de: 'Wallbox Heute', en: 'Wallbox Today' },
                        shortDesc: { de: 'Heute geladene kWh', en: 'kWh charged today' },
                        description: {
                            de: 'Zeigt die heute an der Wallbox geladene Energie.',
                            en: 'Shows the energy charged at the wallbox today.'
                        },
                        unit: 'kWh',
                        range: { de: '0 - je nach Nutzung', en: '0 - depending on usage' },
                        updateFreq: { de: 'Alle paar Minuten', en: 'Every few minutes' },
                        example: 'sensor.wallbox_energy_today',
                        required: false
                    },
                    {
                        key: 'sensor_wallbox_state',
                        icon: 'üîå',
                        name: { de: 'Wallbox Status', en: 'Wallbox State' },
                        shortDesc: { de: 'Aktueller Status der Wallbox', en: 'Current state of wallbox' },
                        description: {
                            de: 'Zeigt den aktuellen Status der Wallbox (z.B. "charging", "connected", "disconnected").',
                            en: 'Shows the current state of the wallbox (e.g. "charging", "connected", "disconnected").'
                        },
                        unit: 'Text',
                        range: { de: 'charging, connected, disconnected, etc.', en: 'charging, connected, disconnected, etc.' },
                        updateFreq: { de: 'Bei √Ñnderung', en: 'On change' },
                        example: 'sensor.wallbox_status',
                        required: false
                    }
                ];

                const weatherSensors = [
                    {
                        key: 'weather_entity',
                        icon: 'üå§Ô∏è',
                        name: { de: 'Wetter-Entit√§t', en: 'Weather Entity' },
                        shortDesc: { de: 'Home Assistant Wetter-Integration', en: 'Home Assistant weather integration' },
                        description: {
                            de: 'Die Home Assistant Wetter-Entit√§t f√ºr aktuelle Wetterdaten und Vorhersagen. Wird f√ºr die Wetter-Widgets, Kleidungsempfehlung und KI-Prognose-Korrektur verwendet.',
                            en: 'The Home Assistant weather entity for current weather data and forecasts. Used for weather widgets, clothing recommendation and AI forecast correction.'
                        },
                        unit: 'weather.* Entity',
                        range: { de: 'Home Assistant Wetter-Entit√§t', en: 'Home Assistant weather entity' },
                        updateFreq: { de: 'Je nach Integration', en: 'Depends on integration' },
                        example: 'weather.home',
                        integrations: { de: 'OpenWeatherMap, Met.no, AccuWeather, DWD, Pirate Weather', en: 'OpenWeatherMap, Met.no, AccuWeather, DWD, Pirate Weather' },
                        tip: { de: 'Met.no ist kostenlos und liefert gute Daten f√ºr Europa.', en: 'Met.no is free and provides good data for Europe.' },
                        required: false
                    }
                ];

                const billingSensors = [
                    {
                        key: 'billing_start_day',
                        icon: 'üìÖ',
                        name: { de: 'Abrechnungsstart Tag', en: 'Billing Start Day' },
                        shortDesc: { de: 'Tag des Abrechnungsjahr-Beginns', en: 'Day of billing year start' },
                        description: {
                            de: 'Der Tag im Monat, an dem dein Stromjahr beginnt. Wichtig f√ºr die korrekte Jahresbilanz.',
                            en: 'The day of the month when your electricity year starts. Important for correct annual balance.'
                        },
                        unit: 'Tag (1-31)',
                        range: { de: '1 - 31', en: '1 - 31' },
                        updateFreq: { de: 'Konfiguration', en: 'Configuration' },
                        example: '1',
                        tip: { de: 'Meist der Tag der Z√§hlerablesung deines Stromanbieters.', en: 'Usually the day of your electricity providers meter reading.' },
                        required: false
                    },
                    {
                        key: 'billing_start_month',
                        icon: 'üìÖ',
                        name: { de: 'Abrechnungsstart Monat', en: 'Billing Start Month' },
                        shortDesc: { de: 'Monat des Abrechnungsjahr-Beginns', en: 'Month of billing year start' },
                        description: {
                            de: 'Der Monat, in dem dein Stromjahr beginnt.',
                            en: 'The month when your electricity year starts.'
                        },
                        unit: 'Monat (1-12)',
                        range: { de: '1 - 12', en: '1 - 12' },
                        updateFreq: { de: 'Konfiguration', en: 'Configuration' },
                        example: '1',
                        required: false
                    },
                    {
                        key: 'billing_price_mode',
                        icon: 'üí∞',
                        name: { de: 'Preismodus', en: 'Price Mode' },
                        shortDesc: { de: 'Fester oder dynamischer Strompreis', en: 'Fixed or dynamic electricity price' },
                        description: {
                            de: 'W√§hle zwischen festem Strompreis oder dynamischem Tarif (z.B. Tibber, aWATTar). Bei dynamisch wird der sensor_price_total verwendet.',
                            en: 'Choose between fixed electricity price or dynamic tariff (e.g. Tibber, aWATTar). For dynamic, sensor_price_total is used.'
                        },
                        unit: 'fixed / dynamic',
                        range: { de: 'fixed oder dynamic', en: 'fixed or dynamic' },
                        updateFreq: { de: 'Konfiguration', en: 'Configuration' },
                        example: 'dynamic',
                        required: false
                    },
                    {
                        key: 'billing_fixed_price',
                        icon: 'üí∂',
                        name: { de: 'Fester Strompreis', en: 'Fixed Electricity Price' },
                        shortDesc: { de: 'Fester Preis in ct/kWh', en: 'Fixed price in ct/kWh' },
                        description: {
                            de: 'Dein fester Strompreis inklusive aller Abgaben. Nur relevant wenn Preismodus = fixed.',
                            en: 'Your fixed electricity price including all fees. Only relevant when price mode = fixed.'
                        },
                        unit: 'ct/kWh',
                        range: { de: 'z.B. 25-45 ct/kWh', en: 'e.g. 25-45 ct/kWh' },
                        updateFreq: { de: 'Konfiguration', en: 'Configuration' },
                        example: '35.0',
                        required: false
                    },
                    {
                        key: 'feed_in_tariff',
                        icon: 'üíµ',
                        name: { de: 'Einspeiseverg√ºtung', en: 'Feed-in Tariff' },
                        shortDesc: { de: 'Verg√ºtung pro eingespeister kWh', en: 'Payment per kWh fed in' },
                        description: {
                            de: 'Die Verg√ºtung, die du pro eingespeister kWh erh√§ltst. Wird f√ºr die Wirtschaftlichkeitsberechnung verwendet.',
                            en: 'The payment you receive per kWh fed in. Used for profitability calculations.'
                        },
                        unit: 'ct/kWh',
                        range: { de: 'z.B. 6-12 ct/kWh', en: 'e.g. 6-12 ct/kWh' },
                        updateFreq: { de: 'Konfiguration', en: 'Configuration' },
                        example: '8.1',
                        tip: { de: 'In Deutschland gilt die EEG-Verg√ºtung, die vom Inbetriebnahmedatum abh√§ngt.', en: 'In Germany, the EEG remuneration applies, which depends on the commissioning date.' },
                        required: false
                    }
                ];

                const forecastSensors = [
                    {
                        key: 'forecast_entity_1',
                        icon: 'üìà',
                        name: { de: 'Externe Prognose 1', en: 'External Forecast 1' },
                        shortDesc: { de: 'Erste externe Prognose-Entity', en: 'First external forecast entity' },
                        description: {
                            de: 'Eine externe Solarprognose-Entity zum Vergleich mit der SFML-eigenen KI-Prognose. Wird im Prognose-Vergleich angezeigt.',
                            en: 'An external solar forecast entity for comparison with SFMLs own AI forecast. Displayed in forecast comparison.'
                        },
                        unit: 'kWh',
                        range: { de: 'Tagesprognose in kWh', en: 'Daily forecast in kWh' },
                        updateFreq: { de: 'T√§glich', en: 'Daily' },
                        example: 'sensor.solcast_forecast_today',
                        integrations: { de: 'Solcast, Forecast.Solar, OpenWeatherMap Solar', en: 'Solcast, Forecast.Solar, OpenWeatherMap Solar' },
                        tip: { de: 'Solcast bietet 10 kostenlose API-Aufrufe pro Tag.', en: 'Solcast offers 10 free API calls per day.' },
                        required: false
                    },
                    {
                        key: 'forecast_entity_2',
                        icon: 'üìà',
                        name: { de: 'Externe Prognose 2', en: 'External Forecast 2' },
                        shortDesc: { de: 'Zweite externe Prognose-Entity', en: 'Second external forecast entity' },
                        description: {
                            de: 'Eine zweite externe Solarprognose zum Vergleich. Optional f√ºr noch detailliertere Vergleiche.',
                            en: 'A second external solar forecast for comparison. Optional for even more detailed comparisons.'
                        },
                        unit: 'kWh',
                        range: { de: 'Tagesprognose in kWh', en: 'Daily forecast in kWh' },
                        updateFreq: { de: 'T√§glich', en: 'Daily' },
                        example: 'sensor.forecast_solar_today',
                        required: false
                    },
                    {
                        key: 'forecast_entity_1_name',
                        icon: 'üè∑Ô∏è',
                        name: { de: 'Name Prognose 1', en: 'Forecast 1 Name' },
                        shortDesc: { de: 'Anzeigename f√ºr Prognose 1', en: 'Display name for forecast 1' },
                        description: {
                            de: 'Der Name, der im Prognose-Vergleich f√ºr die erste externe Prognose angezeigt wird.',
                            en: 'The name displayed in the forecast comparison for the first external forecast.'
                        },
                        unit: 'Text',
                        range: { de: 'Beliebiger Name', en: 'Any name' },
                        updateFreq: { de: 'Konfiguration', en: 'Configuration' },
                        example: 'Solcast',
                        required: false
                    },
                    {
                        key: 'forecast_entity_2_name',
                        icon: 'üè∑Ô∏è',
                        name: { de: 'Name Prognose 2', en: 'Forecast 2 Name' },
                        shortDesc: { de: 'Anzeigename f√ºr Prognose 2', en: 'Display name for forecast 2' },
                        description: {
                            de: 'Der Name, der im Prognose-Vergleich f√ºr die zweite externe Prognose angezeigt wird.',
                            en: 'The name displayed in the forecast comparison for the second external forecast.'
                        },
                        unit: 'Text',
                        range: { de: 'Beliebiger Name', en: 'Any name' },
                        updateFreq: { de: 'Konfiguration', en: 'Configuration' },
                        example: 'Forecast.Solar',
                        required: false
                    }
                ];

                const openModal = (sensor) => {
                    selectedSensor.value = sensor;
                    document.body.style.overflow = 'hidden';
                };

                const closeModal = () => {
                    selectedSensor.value = null;
                    document.body.style.overflow = '';
                };

                // Close on Escape
                document.addEventListener('keydown', (e) => {
                    if (e.key === 'Escape' && selectedSensor.value) {
                        closeModal();
                    }
                });

                return {
                    lang,
                    t,
                    selectedSensor,
                    energyFlowSensors,
                    batterySensors,
                    gridSensors,
                    houseSensors,
                    panelSensors,
                    consumerSensors,
                    weatherSensors,
                    billingSensors,
                    forecastSensors,
                    openModal,
                    closeModal
                };
            }
        }).mount('#app');
    </script>
</body>
</html>
