{
  "config": {
    "step": {
      "user": {
        "title": "Solar Forecast ML",
        "description": "Required: Power Sensor, Daily Yield\nOptional: All other fields\n\nWeather data is provided automatically via Open-Meteo API (no configuration needed)",
        "data": {
          "power_entity": "Power Sensor (W)",
          "solar_yield_today": "Daily Yield (kWh)",
          "total_consumption_today": "Daily Consumption (kWh)",
          "solar_capacity": "System Capacity (kWp)",
          "inverter_max_power": "Inverter Max Power (kW)",
          "rain_sensor": "Rain Sensor",
          "lux_sensor": "Illuminance Sensor (lx)",
          "temp_sensor": "Temperature Sensor",
          "wind_sensor": "Wind Sensor",
          "humidity_sensor": "Humidity Sensor",
          "pressure_sensor": "Pressure Sensor (hPa)",
          "solar_radiation_sensor": "Solar Radiation Sensor (W/m²)"
        },
        "data_description": {
          "power_entity": "Current power in Watts (Required)",
          "solar_yield_today": "Daily yield in kWh - MUST reset at midnight (Required)",
          "total_consumption_today": "Daily consumption in kWh (Optional)",
          "solar_capacity": "Peak power in kWp, e.g., 5.5 (Optional, auto-calculated with panel groups)",
          "inverter_max_power": "Max AC power of inverter in kW. Forecasts are capped and clipped hours excluded from training. 0 = disabled. (Optional)",
          "rain_sensor": "External rain sensor (Optional)",
          "lux_sensor": "External illuminance in Lux (Optional)",
          "temp_sensor": "External temperature (Optional)",
          "wind_sensor": "External wind speed (Optional)",
          "humidity_sensor": "External humidity (Optional)",
          "pressure_sensor": "External barometric pressure in hPa (Optional)",
          "solar_radiation_sensor": "External solar radiation in W/m² (Optional, preferred over Lux)"
        }
      },
      "panel_groups": {
        "title": "Configure Panel Groups (Required)",
        "description": "⚠️ REQUIRED: At least 1 panel group needed (max. 4)\n\nFormat: Power(Wp)/Azimuth(°)/Tilt(°)/Daily-kWh-Sensor\n\nExample south-facing:\n5000/180/30/sensor.pv_energy_today\n\nExample east-west:\n2500/90/15/sensor.pv_east_today, 2500/270/15/sensor.pv_west_today\n\nAzimuth: 0°=North, 90°=East, 180°=South, 270°=West\nTilt: 0°=horizontal, 90°=vertical\n\nDaily-kWh-Sensor: Required for correct group learning (must reset at midnight)",
        "data": {
          "panel_groups_input": "Panel Groups"
        },
        "data_description": {
          "panel_groups_input": "Format: Power/Azimuth/Tilt/Daily-kWh-Sensor - comma or newline separated"
        }
      },
      "reconfigure_panel_groups": {
        "title": "Reconfigure Panel Groups (Required)",
        "description": "⚠️ REQUIRED: At least 1 panel group needed (max. 4)\n\nFormat: Power(Wp)/Azimuth(°)/Tilt(°)/Daily-kWh-Sensor\n\nExample: 5000/180/30/sensor.pv_energy_today\nOr: 2500/90/15/sensor.pv_east, 2500/270/15/sensor.pv_west\n\nDaily-kWh-Sensor: Required for correct group learning",
        "data": {
          "panel_groups_input": "Panel Groups"
        },
        "data_description": {
          "panel_groups_input": "Format: Power/Azimuth/Tilt/Daily-kWh-Sensor - comma or newline separated"
        }
      },
      "reconfigure": {
        "title": "Reconfigure Solar Forecast ML",
        "description": "Update configuration\nEmpty optional fields will clear their value\n\nWeather data is provided automatically via Open-Meteo API",
        "data": {
          "power_entity": "Power Sensor (W)",
          "solar_yield_today": "Daily Yield (kWh)",
          "total_consumption_today": "Daily Consumption (kWh)",
          "solar_capacity": "System Capacity (kWp)",
          "inverter_max_power": "Inverter Max Power (kW)",
          "rain_sensor": "Rain Sensor",
          "lux_sensor": "Illuminance Sensor (lx)",
          "temp_sensor": "Temperature Sensor",
          "wind_sensor": "Wind Sensor",
          "humidity_sensor": "Humidity Sensor",
          "pressure_sensor": "Pressure Sensor (hPa)",
          "solar_radiation_sensor": "Solar Radiation Sensor (W/m²)"
        },
        "data_description": {
          "power_entity": "Current power in Watts (Required)",
          "solar_yield_today": "Daily yield in kWh - MUST reset at midnight (Required)",
          "total_consumption_today": "Daily consumption in kWh (Optional)",
          "solar_capacity": "Peak power in kWp, e.g., 5.5 (Optional, auto-calculated with panel groups)",
          "inverter_max_power": "Max AC power of inverter in kW. Forecasts are capped and clipped hours excluded from training. 0 = disabled. (Optional)",
          "rain_sensor": "External rain sensor (Optional)",
          "lux_sensor": "External illuminance in Lux (Optional)",
          "temp_sensor": "External temperature (Optional)",
          "wind_sensor": "External wind speed (Optional)",
          "humidity_sensor": "External humidity (Optional)",
          "pressure_sensor": "External barometric pressure in hPa (Optional)",
          "solar_radiation_sensor": "External solar radiation in W/m² (Optional, preferred over Lux)"
        }
      }
    },
    "error": {
      "cannot_connect": "Connection to sensor failed",
      "invalid_auth": "Invalid authentication",
      "unknown": "Unknown error occurred",
      "invalid_capacity": "Capacity must be 0.1-1000.0 kWp",
      "invalid_input": "Invalid input format",
      "required": "Field required",
      "already_configured": "Weather entity already in use",
      "sensor_not_found": "Sensor entity not found",
      "invalid_sensor_state": "Sensor state invalid or unavailable",
      "invalid_panel_format": "Invalid format. Please use: Power/Azimuth/Tilt (e.g., 1200/180/30)",
      "panel_groups_required": "At least 1 panel group required. Format: Power/Azimuth/Tilt/Sensor (e.g., 5000/180/30/sensor.pv_today)",
      "too_many_panel_groups": "Maximum 4 panel groups allowed"
    },
    "abort": {
      "already_configured": "Integration already configured",
      "reconfigure_successful": "Reconfiguration successful",
      "not_reconfigure": "Only available for reconfiguration",
      "entry_not_found": "Configuration entry not found"
    }
  },
  "options": {
    "step": {
      "init": {
        "title": "Advanced Options",
        "description": "Configure update intervals and notifications",
        "data": {
          "update_interval": "Update Interval (s)",
          "diagnostic": "Diagnostic Mode",
          "hourly": "Hourly Forecast Sensor",
          "notify_startup": "Startup Notification",
          "notify_forecast": "Forecast Notifications",
          "notify_learning": "Training Notifications",
          "notify_successful_learning": "Success Notifications",
          "notify_fog": "Fog Notifications",
          "notify_frost": "Frost Notifications",
          "notify_weather_alert": "Weather Alert Notifications",
          "notify_snow_covered_panels": "Snow Coverage Notifications",
          "ml_algorithm": "Mode",
          "enable_tiny_lstm": "Enable / Disable AI",
          "adaptive_forecast_mode": "Adaptive Forecast",
          "winter_mode": "Winter Mode",
          "learning_backup_protection": "Learning Data Protection",
          "zero_export_mode": "Zero Export Mode (MPPT Detection)",
          "has_battery": "Battery Storage System",
          "solar_to_battery_sensor": "Solar-to-Battery Power Sensor"
        },
        "data_description": {
          "update_interval": "Forecast update interval (300-86400s, default: 3600)",
          "diagnostic": "Enable diagnostic sensors for monitoring",
          "hourly": "Enable next hour forecast sensor",
          "notify_startup": "Show notification on startup",
          "notify_forecast": "Notify on forecast updates",
          "notify_learning": "Notify on training start",
          "notify_successful_learning": "Notify on training success",
          "notify_fog": "Show notification when fog is detected",
          "notify_frost": "Show notification when frost is detected",
          "notify_weather_alert": "Show notification on weather alerts (rain, storm)",
          "notify_snow_covered_panels": "Show notification when panels are snow-covered",
          "ml_algorithm": "Choose algorithm: 'Automatic' lets system decide based on available data (recommended). 'Ridge' is fast and stable. 'Neural Network' provides 5-10% better accuracy with 100+ samples.",
          "enable_tiny_lstm": "Allow use of Neural Network (requires 100+ samples, 200+ MB RAM). Falls back to Ridge automatically if requirements not met. Recommended: Keep enabled.",
          "adaptive_forecast_mode": "When significant deviations (>35%) between morning forecast and actual production are detected, SFML automatically adjusts the afternoon forecast at 12:30. SFML autonomously decides whether a correction is beneficial - based on fresh weather data and objective criteria. Default: OFF",
          "winter_mode": "Enhanced algorithms for low sun angles (Nov-Feb). When enabled, the effect of cloud cover on forecast is calculated more accurately, significantly improving winter accuracy. Default: ON",
          "learning_backup_protection": "Automatically syncs learning data to /share/ for protection against backup restore. When enabled, your learning progress survives HA backup restores. Default: ON",
          "zero_export_mode": "MPPT THROTTLE DETECTION: Enable if you have a zero-export regulation (e.g. Shelly).\n\nWHY IS THIS IMPORTANT?\nWith zero export, the inverter throttles production to household demand. ML would then learn: 'Sunshine = 200W' instead of 'Sunshine = 1000W (but throttled)'.\n\nWith this option enabled, throttled hours are excluded from ML training.\n\nOnly works during good weather conditions (sun, few clouds) AND when production is significantly below physics prediction.",
          "has_battery": "MPPT THROTTLE DETECTION (Extension): Enable if you have a battery storage system.\n\nWHY IS THIS IMPORTANT?\nWhen the battery is full AND zero export is active, the MPPT throttles production. SFML detects this when the 'Solar-to-Battery' value drops below 50W.\n\nWhen enabled, you MUST configure the 'Solar-to-Battery Sensor' below!",
          "solar_to_battery_sensor": "MPPT THROTTLE DETECTION (Sensor): Power sensor measuring energy flow from PV to battery (in Watts).\n\nEXAMPLES:\n- sensor.pv_to_battery_power\n- sensor.battery_charging_power\n- sensor.solar_battery_flow\n\nHOW DOES IT WORK?\nWhen this value drops below 50W during good weather, the battery is not accepting energy → Battery is full → MPPT throttles → Hour is excluded from training.\n\nOnly relevant when 'Battery Storage System' is enabled!"
        }
      }
    },
    "error": {
      "invalid_interval": "Interval must be 300-86400 seconds",
      "invalid_input": "Invalid input format",
      "energy_sensor_not_found": "Energy sensor not found",
      "energy_sensor_not_numeric": "Energy sensor is not numeric"
    }
  },
  "services": {
    "train_model": {
      "name": "Train ML Model",
      "description": "Manually trigger ML model training with collected production data",
      "fields": {
        "force": {
          "name": "Force Training",
          "description": "Force training even if minimum samples not reached"
        }
      }
    },
    "force_forecast": {
      "name": "Force Forecast Update",
      "description": "Immediately update all forecast sensors"
    },
    "clear_training_data": {
      "name": "Clear Training Data",
      "description": "Delete all collected training samples (requires confirmation)"
    },
    "reset_model": {
      "name": "Reset ML Model",
      "description": "Reset trained model and switch to rule-based forecast"
    }
  },
  "entity": {
    "sensor": {
      "today_forecast": {
        "name": "Forecast Today Remaining"
      },
      "tomorrow_forecast": {
        "name": "Forecast Tomorrow"
      },
      "next_hour_forecast": {
        "name": "Next Hour Forecast"
      },
      "peak_production_hour": {
        "name": "Best Hour for Consumption"
      },
      "average_yield": {
        "name": "Average Monthly Yield"
      },
      "self_sufficiency": {
        "name": "Self-Sufficiency"
      },
      "expected_daily_production": {
        "name": "Expected Daily Production"
      },
      "production_time": {
        "name": "Production Time Today"
      },
      "diagnostic_status": {
        "name": "System Diagnostic Status"
      },
      "yesterday_accuracy": {
        "name": "Yesterday Forecast Accuracy"
      },
      "yesterday_deviation": {
        "name": "Yesterday Forecast Deviation"
      },
      "last_update_timestamp": {
        "name": "Last Update Timestamp"
      },
      "data_age": {
        "name": "Data Age"
      },
      "last_ai_training": {
        "name": "Last AI Training"
      },
      "next_scheduled_task": {
        "name": "Next Scheduled Task"
      },
      "ai_service_status": {
        "name": "AI Service Status"
      },
      "ai_metrics": {
        "name": "AI Model Metrics"
      },
      "ai_rmse": {
        "name": "AI RMSE",
        "state": {
          "excellent": "Excellent",
          "very_good": "Very Good",
          "good": "Good",
          "fair": "Fair",
          "moderate": "Moderate",
          "learning": "Learning"
        }
      },
      "active_prediction_model": {
        "name": "Active Prediction Model"
      },
      "pattern_count": {
        "name": "Pattern Count"
      },
      "physics_samples": {
        "name": "Physics Samples"
      },
      "coordinator_health": {
        "name": "Coordinator Health"
      },
      "data_files_status": {
        "name": "Data Files Status"
      },
      "external_temp_state": {
        "name": "External Temperature Sensor State"
      },
      "external_humidity_state": {
        "name": "External Humidity Sensor State"
      },
      "external_wind_state": {
        "name": "External Wind Sensor State"
      },
      "external_rain_state": {
        "name": "External Rain Sensor State"
      },
      "external_uv_state": {
        "name": "External UV Sensor State"
      },
      "external_lux_state": {
        "name": "External Illuminance Sensor State"
      },
      "power_sensor_state": {
        "name": "Power Sensor State"
      },
      "yield_sensor_state": {
        "name": "Yield Sensor State"
      },
      "cloudiness_trend_1h": {
        "name": "Cloud Trend 1h",
        "state": {
          "getting_clearer": "Getting clearer",
          "slightly_clearer": "Slightly clearer",
          "stable": "Stable",
          "slightly_cloudier": "Slightly cloudier",
          "getting_cloudier": "Getting cloudier"
        }
      },
      "cloudiness_trend_3h": {
        "name": "Cloud Trend 3h",
        "state": {
          "much_clearer": "Much clearer",
          "getting_clearer": "Getting clearer",
          "relatively_stable": "Relatively stable",
          "getting_cloudier": "Getting cloudier",
          "much_cloudier": "Much cloudier"
        }
      },
      "cloudiness_volatility": {
        "name": "Weather Stability",
        "state": {
          "very_stable": "Very stable",
          "stable": "Stable",
          "moderate": "Moderate",
          "variable": "Variable",
          "very_variable": "Very variable"
        },
        "state_attributes": {
          "interpretation": {
            "name": "Interpretation",
            "state": {
              "very_stable": "Very stable",
              "stable": "Stable",
              "moderate": "Moderate",
              "variable": "Variable",
              "very_variable": "Very variable"
            }
          },
          "volatility_percent": {
            "name": "Volatility"
          }
        }
      },
      "shadow_current": {
        "name": "Shadow Current",
        "state": {
          "clear": "Clear",
          "light_shadow": "Light Shadow",
          "moderate_shadow": "Moderate Shadow",
          "heavy_shadow": "Heavy Shadow",
          "night": "Night",
          "no_data": "No Data",
          "error": "Error"
        }
      },
      "shadow_today": {
        "name": "Shadow Today"
      },
      "performance_loss_today": {
        "name": "Performance Loss Today"
      },
      "drift_status": {
        "name": "AI Drift Status",
        "state": {
          "stable": "Stable",
          "warning": "Warning",
          "critical": "Critical",
          "recovering": "Recovering",
          "unknown": "Unknown"
        }
      }
    }
  },
  "selector": {
    "ml_algorithm": {
      "options": {
        "auto": "Automatic (Recommended)",
        "ridge": "Ridge Regression (Fast)",
        "tiny_lstm": "Neural Network (Better Accuracy)"
      }
    }
  }
}
