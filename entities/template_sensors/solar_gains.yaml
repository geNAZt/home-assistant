trigger:
- platform: time_pattern
  seconds: "/5"
sensor:
  # --- SUMMEN-SENSOR (Korrigiert) ---
  - name: "Solar Gains"
    unique_id: solar_gains
    unit_of_measurement: 'W'
    device_class: power
    state_class: measurement
    state: >
      {% set gains = states.sensor 
              | selectattr('entity_id', 'search', '^sensor.solar_gain_[A-Za-z]+$') 
              | map(attribute='state') | map('float')
              | sum %}
      {{ gains | round(0) }}