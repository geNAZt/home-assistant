name: inside_temp_mean_24h_sql
unit_of_measurement: "Â°C"
query: >
  WITH per_slot AS (
    SELECT s.start_ts, AVG(s.mean) AS mean_inside
    FROM statistics_short_term s
    JOIN statistics_meta m ON m.id = s.metadata_id
    WHERE m.statistic_id IN (
      'sensor.temperature_wohnzimmer',
      'sensor.temperature_kueche',
      'sensor.temperature_flur_1',
      'sensor.temperature_flur_2',
      'sensor.temperature_flur_3',
      'sensor.temperature_schlafzimmer',
      'sensor.temperature_buero_fabian',
      'sensor.temperature_buero_merja'
    )
      AND s.start_ts >= strftime('%s','now') - 86400
    GROUP BY s.start_ts
  )
  SELECT ROUND(AVG(mean_inside), 2) AS value FROM per_slot;
column: "value"